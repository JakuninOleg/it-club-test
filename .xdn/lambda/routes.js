!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(global,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=91)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XDN_CONFIG_FILE="xdn.config.js",t.XDN_ASSET_ALIASES_FILE="asset-aliases.json",t.XDN_ENV_VARIABLES={config:"XDN_CONFIG",deploymentType:"XDN_DEPLOYMENT_TYPE",versionOverride:"XDN_VERSION_OVERRIDE"},t.XDN_DEPLOYMENT_TYPE_AWS="AWS",t.XDN_HEADERS_PREFIX="x-xdn-",t.XDN_MAX_USER_HEADERS_ALLOWED=70,t.XDN_TOO_MANY_HEADERS_STATUS_CODE=542,t.XDN_UNCACHED_PREFETCH_STATUS=412,t.ACTIONS={setHeader:"set-header",updateHeader:"update-header",removeHeader:"remove-header",syntheticRes:"synthetic-response",updatePath:"update-path",proxy:"proxy",addCookie:"add-cookie",updateCookie:"update-cookie",removeCookie:"remove-cookie"},t.BACKENDS={js:"__js__",static:"__static__"},t.HTTP_METHODS={head:"head",get:"get",post:"post",delete:"delete",put:"put",patch:"patch",options:"options"},t.HTTP_HEADERS={authorization:"authorization",acceptEncoding:"accept-encoding",cacheControl:"cache-control",contentEncoding:"content-encoding",contentType:"content-type",cookie:"cookie",host:"host",location:"location",serverTiming:"server-timing",setCookie:"set-cookie",userAgent:"user-agent",vary:"vary",xForwardedFor:"x-forwarded-for",xRequestId:"x-request-id",xSwCacheControl:"x-sw-cache-control",xXdnBrowser:"x-xdn-browser",xXdnCacheControl:"x-xdn-cache-control",xXdnCachingStatus:"x-xdn-caching-status",xXdnClientIp:"x-xdn-client-ip",xXdnComponents:"x-xdn-components",xXdnDestination:"x-xdn-destination",xXdnDevice:"x-xdn-device",xXdnDeviceIsBot:"x-xdn-device-is-bot",xXdnGeoCity:"x-xdn-geo-city",xXdnGeoCountryCode:"x-xdn-geo-country-code",xXdnGeoLatitude:"x-xdn-geo-latitude",xXdnGeoLongitude:"x-xdn-geo-longitude",xXdnGeoPostalCode:"x-xdn-geo-postal-code",xXdnMatchedRoutes:"x-xdn-matched-routes",xXdnProtocol:"x-xdn-protocol",xXdnRoute:"x-xdn-route",xXdnStatus:"x-xdn-status",xXdnT:"x-xdn-t",xXdnUserT:"x-xdn-user-t",xXdnVendor:"x-xdn-vendor",xXdnVersion:"x-xdn-version"},t.CACHING_STATUS={ok:"ok",private:"private",method:"method",bodyTooBig:"body-too-big",code:"code",setCookie:"set-cookie",noMaxAge:"no-max-age"},t.CACHEABLE_METHODS=new Set(["get","head"]),t.PREFETCH_QUERY_PARAM="xdn_prefetch",t.HEAD_QUERY_PARAM="xdn_head",t.POST_BODY_QUERY_PARAM="pref_xdn_body",t.METHOD_QUERY_PARAM="pref_xdn_method",t.ROUTES_FALLBACK="fallback"},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var n=r(53),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){var n=r(97),o=r(102);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},function(e,t,r){var n=r(19),o=r(98),i=r(99),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?o(e):i(e)}},function(e,t,r){var n=r(37),o=r(39);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(26);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t){e.exports=function(e){return e}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(61)),i=n(r(184)),s=n(r(76)),a=n(r(187)),u=r(32),c=r(8),l=r(0),f=n(r(210)),p=n(r(212)),h=n(r(14));t.DEFAULTS={production:!0,backends:{},routes:"routes.js",includeNodeModules:!1};var d=function(){function e(){}return e.prototype.get=function(e,t){if(this.has(e))return o.default(this.config,e);if(void 0!==t)return t;throw new Error('XDN configuration key: "'+e+'" is not defined')},e.prototype.getServer=function(){if(!this.server){var e=this.get("server",null);this.server=p.default(e)}return this.server},e.prototype.defaultTo=function(e,t){this.has(e)||i.default(this.config,e,t)},e.prototype.has=function(e){return this.config||this.loadXdnConfig(),s.default(this.config,e)},e.prototype.loadXdnConfig=function(){var e=this._loadFromFile(),r=this._loadFromEnv();this.config=a.default({},t.DEFAULTS,e,r)},e.prototype._loadFromFile=function(){var e=c.join(process.cwd(),l.XDN_CONFIG_FILE);if(u.existsSync(e))try{var t=h.default(e);return f.default.validateXdnFileConfiguration(t)}catch(t){throw new Error("Failed to load "+e+": "+t.message)}return{}},e.prototype._loadFromEnv=function(){if(process.env[l.XDN_ENV_VARIABLES.config])try{return JSON.parse(process.env[l.XDN_ENV_VARIABLES.config])}catch(e){throw new Error("XDN configuration variable: "+l.XDN_ENV_VARIABLES.config+", is not parsable as json")}return{}},e}();t.default=new d},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var slash_1=__importDefault(__webpack_require__(211));function nonWebpackRequire(modulePath){return eval("require")(slash_1.default(modulePath))}exports.default=nonWebpackRequire},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("http")},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(2).Symbol;e.exports=n},function(e,t,r){var n=r(106),o=r(4),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},function(e,t,r){(function(e){var n=r(2),o=r(107),i=t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i?n.Buffer:void 0,u=(a?a.isBuffer:void 0)||o;e.exports=u}).call(this,r(22)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(108),o=r(109),i=r(110),s=i&&i.isTypedArray,a=s?o(s):n;e.exports=a},function(e,t,r){var n=r(55),o=r(35),i=r(7);e.exports=function(e){return i(e)?n(e):o(e)}},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var n=r(6),o=r(4);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},function(e,t,r){var n=r(116),o=r(117),i=r(118),s=r(119),a=r(120);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,e.exports=u},function(e,t,r){var n=r(10);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(5)(Object,"create");e.exports=n},function(e,t,r){var n=r(134);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){var n=r(67);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function o(){return process.env[n.XDN_ENV_VARIABLES.deploymentType]===n.XDN_DEPLOYMENT_TYPE_AWS}function i(){return"production"===process.env.NODE_ENV}t.isCloud=o,t.isProductionBuild=i,t.isXdnRunDev=function(){return!o()&&!i()}},function(e,t){e.exports=require("util")},function(e,t,r){var n=r(18),o=r(95),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t,r){var n=r(96),o=r(38),i=r(103),s=r(104),a=r(105),u=r(6),c=r(54),l=c(n),f=c(o),p=c(i),h=c(s),d=c(a),v=u;(n&&"[object DataView]"!=v(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,r){var n=r(6),o=r(3);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){var n=r(5)(r(2),"Map");e.exports=n},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,r){var n=r(114),o=r(155),i=r(12),s=r(1),a=r(163);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?o(e[0],e[1]):n(e):a(e)}},function(e,t,r){var n=r(27),o=r(121),i=r(122),s=r(123),a=r(124),u=r(125);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,e.exports=c},function(e,t,r){var n=r(126),o=r(133),i=r(135),s=r(136),a=r(137);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,e.exports=u},function(e,t,r){var n=r(1),o=r(44),i=r(156),s=r(63);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:i(s(e))}},function(e,t,r){var n=r(1),o=r(26),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))}},function(e,t,r){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},o=t||{},s=e.split(i),u=o.decode||n,c=0;c<s.length;c++){var l=s[c],f=l.indexOf("=");if(!(f<0)){var p=l.substr(0,f).trim(),h=l.substr(++f,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),null==r[p]&&(r[p]=a(h,u))}}return r},t.serialize=function(e,t,r){var n=r||{},i=n.encode||o;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=i(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var u=e+"="+a;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");u+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");u+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(u+="; HttpOnly");n.secure&&(u+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return u};var n=decodeURIComponent,o=encodeURIComponent,i=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}},function(e,t,r){"use strict";function n(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var o=1,i="";if("?"===e[a=r+1])throw new TypeError('Pattern cannot start with "?" at '+a);for(;a<e.length;)if("\\"!==e[a]){if(")"===e[a]){if(0===--o){a++;break}}else if("("===e[a]&&(o++,"?"!==e[a+1]))throw new TypeError("Capturing groups are not allowed at "+a);i+=e[a++]}else i+=e[a++]+e[a++];if(o)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=a}else{for(var s="",a=r+1;a<e.length;){var u=e.charCodeAt(a);if(!(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||95===u))break;s+=e[a++]}if(!s)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:s}),r=a}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,o=void 0===n?"./":n,i="[^"+u(t.delimiter||"/#?")+"]+?",s=[],a=0,c=0,l="",f=function(e){if(c<r.length&&r[c].type===e)return r[c++].value},p=function(e){var t=f(e);if(void 0!==t)return t;var n=r[c],o=n.type,i=n.index;throw new TypeError("Unexpected "+o+" at "+i+", expected "+e)},h=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t};c<r.length;){var d=f("CHAR"),v=f("NAME"),y=f("PATTERN");if(v||y){var g=d||"";-1===o.indexOf(g)&&(l+=g,g=""),l&&(s.push(l),l=""),s.push({name:v||a++,prefix:g,suffix:"",pattern:y||i,modifier:f("MODIFIER")||""})}else{var m=d||f("ESCAPED_CHAR");if(m)l+=m;else if(l&&(s.push(l),l=""),f("OPEN")){g=h();var b=f("NAME")||"",_=f("PATTERN")||"",x=h();p("CLOSE"),s.push({name:b||(_?a++:""),pattern:b&&!_?i:_,prefix:g,suffix:x,modifier:f("MODIFIER")||""})}else p("END")}}return s}function o(e,t){return i(n(e,t),t)}function i(e,t){void 0===t&&(t={});var r=c(t),n=t.encode,o=void 0===n?function(e){return e}:n,i=t.validate,s=void 0===i||i,a=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var u=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,l="*"===i.modifier||"+"===i.modifier;if(Array.isArray(u)){if(!l)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===u.length){if(c)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var f=0;f<u.length;f++){var p=o(u[f],i);if(s&&!a[n].test(p))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+p+'"');r+=i.prefix+p+i.suffix}}else if("string"!=typeof u&&"number"!=typeof u){if(!c){var h=l?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+h)}}else{p=o(String(u),i);if(s&&!a[n].test(p))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+p+'"');r+=i.prefix+p+i.suffix}}else r+=i}return r}}function s(e,t){var r=[];return a(f(e,r,t),r,t)}function a(e,t,r){void 0===r&&(r={});var n=r.decode,o=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],s=n.index,a=Object.create(null),u=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?a[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return o(e,r)})):a[r.name]=o(n[e],r)},c=1;c<n.length;c++)u(c);return{path:i,index:s,params:a}}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function c(e){return e&&e.sensitive?"":"i"}function l(e,t,r){void 0===r&&(r={});for(var n=r.strict,o=void 0!==n&&n,i=r.start,s=void 0===i||i,a=r.end,l=void 0===a||a,f=r.encode,p=void 0===f?function(e){return e}:f,h="["+u(r.endsWith||"")+"]|$",d="["+u(r.delimiter||"/#?")+"]",v=s?"^":"",y=0,g=e;y<g.length;y++){var m=g[y];if("string"==typeof m)v+=u(p(m));else{var b=u(p(m.prefix)),_=u(p(m.suffix));if(m.pattern)if(t&&t.push(m),b||_)if("+"===m.modifier||"*"===m.modifier){var x="*"===m.modifier?"?":"";v+="(?:"+b+"((?:"+m.pattern+")(?:"+_+b+"(?:"+m.pattern+"))*)"+_+")"+x}else v+="(?:"+b+"("+m.pattern+")"+_+")"+m.modifier;else v+="("+m.pattern+")"+m.modifier;else v+="(?:"+b+_+")"+m.modifier}}if(l)o||(v+=d+"?"),v+=r.endsWith?"(?="+h+")":"$";else{var w=e[e.length-1],E="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;o||(v+="(?:"+d+"(?="+h+"))?"),E||(v+="(?="+d+"|"+h+")")}return new RegExp(v,c(r))}function f(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=r.exec(e.source);o;)t.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return f(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",c(r))}(e,t,r):function(e,t,r){return l(n(e,r),t,r)}(e,t,r)}r.r(t),r.d(t,"parse",(function(){return n})),r.d(t,"compile",(function(){return o})),r.d(t,"tokensToFunction",(function(){return i})),r.d(t,"match",(function(){return s})),r.d(t,"regexpToFunction",(function(){return a})),r.d(t,"tokensToRegexp",(function(){return l})),r.d(t,"pathToRegexp",(function(){return f}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return((e.ignoreCase?"(?i)":"")+e.source).replace(/\\\//g,"/")}},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=l(r(32)),p=r(8),h=l(r(227)),d=l(r(13)),v=l(r(228)),y=l(r(83)),g=l(r(66)),m=l(r(51)),b=l(r(231)),_=r(0),x=r(33),w=r(85),E=l(r(250)),R=r(86),S=r(87),C=l(r(255)),A=r(88),O=l(r(72)),T=l(r(14)),k=r(256),H=function(e){function t(t,r,n,o){var c=e.call(this,t,r,n)||this;return c.params={},c.streaming=!1,c.preCacheRequestActions=[],c.postCacheRequestActions=[],c.preCacheResponseActions=[],c.postCacheResponseActions=[],c.interpolateParams=function(e){return y.default(c.request,c.response,e)},c.redirect=function(e,t){void 0===t&&(t=302),c.setResponseHeader("location",h.default(e,c.request.params)),c.send("",t)},c.proxy=function(e,t){var r=d.default.get("backends."+e);c.proxyHost(r,t)},c.render=function(e){console.warn(k.warnLogLabel,"Warning ResponseWriter#render is deprecated."),e(c.request,c.proxy,c.request.params)},c.stream=function(e){if("production"===process.env.NODE_ENV)throw new Error("stream can only be used in development");var t=P(d.default.get("backends."+e));c.response.setHeader("Content-Type","text/event-stream"),c.streaming=!0,b.default(c.request,c.response,t,Function.prototype),c.setCreateResponseAction((function(){return Promise.resolve()}))},c.proxyHost=function(e,t){var r=void 0===t?{}:t,n=r.path,o=r.transformRequest,a=r.transformResponse,u=r.headers;e=P(e);var l,f=new v.default(e);l=(l="function"==typeof n?n():n)?h.default(l,c.request.params):l,c.setCreateResponseAction((function(){return i(c,void 0,void 0,(function(){var t,r,n,i,c=this;return s(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,13,,14]),!o)return[3,4];t=new A.InternalTiming("wa").start(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.runImmediately((function(){return o(c.request)}))];case 2:return s.sent(),[3,4];case 3:return t.end(),[7];case 4:r=new A.InternalTiming("wp").start(),s.label=5;case 5:return s.trys.push([5,,7,8]),[4,f.fetch(this.request,this.response,{path:l||this.request.url,disableCheckCert:e.disableCheckCert,headers:u})];case 6:return s.sent(),[3,8];case 7:return r.end(),[7];case 8:if(!a)return[3,12];n=new A.InternalTiming("wz").start(),s.label=9;case 9:return s.trys.push([9,,11,12]),E.default(this.response),[4,this.runImmediately((function(){return a(c.response,c.request)}))];case 10:return s.sent(),[3,12];case 11:return n.end(),[7];case 12:return[3,14];case 13:return"BackendFetchError"===(i=s.sent()).type?(console.error(k.errorLogLabel,"Could not connect to backend "+e.domainOrIp+":",i.message),this.response.statusCode=503):(console.error(k.errorLogLabel,"Error in ResponseWriter:",i),this.response.statusCode=500),[3,14];case 14:return[2]}}))}))}))},c.updatePath=function(e){var t=h.default(e,c.request.params);Object.defineProperty(c.request,"path",{get:function(){return t}})},c.rewrite=function(e,t){var r=h.default(e,c.request.params);c.request.params=new O.default(t).match(r)},c.serveStatic=function(e){var t=e&&h.default(e,c.request.params);if(t=t.replace(/\/$/,""),x.isCloud())c.proxyHost(d.default.get("backends."+_.BACKENDS.static),{path:t});else{if(!f.default.existsSync(t))return c.send("404 - Not found",404);f.default.lstatSync(t).isDirectory()&&(t=p.join(t,"./index.html"));var r=f.default.statSync(t),n=T.default("mime-types").lookup(t);n&&c.setResponseHeader("Content-Type",n),c.setResponseHeader("Content-Length",r.size.toString()),c.setCreateResponseAction((function(){return new Promise((function(e,r){f.default.readFile(t,(function(t,n){t?r(t):(c.response.body=n,e())}))}))}))}},c.cache=function(e){var t=e.browser,r=e.edge,n=e.key;if(r){var o=r.maxAgeSeconds,i=r.staleWhileRevalidateSeconds,s=r.forcePrivateCaching,a=[];void 0!==s&&(c.context.forcePrivateCaching=!0===s),c.cacheKey=n,"string"==typeof c.route.criteria.method&&(c.context.cacheRouteMethod=c.route.criteria.method),o&&(a.push("max-age="+o),i&&a.push("stale-while-revalidate="+i)),a.length&&c.internalSetResponseHeader(_.HTTP_HEADERS.xXdnCacheControl,a.join(", "),!1,c.preCacheResponseActions)}if(t||!1===t){var u=t||{maxAgeSeconds:0},l=(o=u.maxAgeSeconds,u.serviceWorkerSeconds);0===o?c.setResponseHeader(_.HTTP_HEADERS.cacheControl,"private, no-store, no-cache"):o&&c.setResponseHeader(_.HTTP_HEADERS.cacheControl,"private, max-age="+o),l&&c.setResponseHeader(_.HTTP_HEADERS.xSwCacheControl,"max-age="+l)}},c.setResponseHeader=function(e,t){c.internalSetResponseHeader(e,t,!0,c.postCacheResponseActions)},c.internalSetResponseHeader=function(e,t,r,n){r&&w.validateSetResponseHeader(e),c.scheduleExecution(n,(function(){var r=h.default(t.toString(),c.request.params),n=c.interpolateParams(r);c.response.setHeader(e,n)}))},c.updateResponseHeader=function(e,t,r){c.internalUpdateResponseHeader(e,t,r,c.preCacheResponseActions)},c.internalUpdateResponseHeader=function(e,t,r,n){w.validateUpdateResponseHeader(e),c.scheduleExecution(n,(function(){var n=c.response.getHeader(e),o=c.interpolateParams(r);n&&c.response.setHeader(e,n.replace(t,o))}))},c.removeResponseHeader=function(e){c.internalRemoveResponseHeader(e,c.postCacheResponseActions)},c.internalRemoveResponseHeader=function(e,t){w.validateRemoveResponseHeader(e),c.scheduleExecution(t,(function(){c.response.removeHeader(e)}))},c.getSetCookieValues=function(){var e=c.response.getHeader(_.HTTP_HEADERS.setCookie);return"string"==typeof e?[e]:m.default(e,[])},c.getAddResponseCookieAction=function(e,t){return function(){var r=c.getSetCookieValues(),n=c.interpolateParams(t);c.response.setHeader(_.HTTP_HEADERS.setCookie,u(r,[e+"="+n]))}},c.addUpstreamResponseCookie=function(e,t){w.validateCookieName(e),c.scheduleExecution(c.preCacheResponseActions,c.getAddResponseCookieAction(e,t))},c.addResponseCookie=function(e,t){w.validateCookieName(e),c.scheduleExecution(c.postCacheResponseActions,c.getAddResponseCookieAction(e,t))},c.getUpdateResponseCookieAction=function(e,t,r){return function(){var n=c.getSetCookieValues().map((function(n){var o=a(n.split("=")),i=o[0],s=o.slice(1);return i!==e?n:[i,s.join("=").replace(t,r)].join("=")}));c.response.setHeader(_.HTTP_HEADERS.setCookie,n)}},c.updateUpstreamResponseCookie=function(e,t,r){w.validateCookieName(e),c.scheduleExecution(c.preCacheResponseActions,c.getUpdateResponseCookieAction(e,t,r))},c.updateResponseCookie=function(e,t,r){w.validateCookieName(e),c.scheduleExecution(c.postCacheResponseActions,c.getUpdateResponseCookieAction(e,t,r))},c.getRemoveResponseCookieAction=function(e){return function(){var t=c.getSetCookieValues().filter((function(t){return t.split("=")[0]!==e}));c.response.setHeader(_.HTTP_HEADERS.setCookie,t)}},c.removeUpstreamResponseCookie=function(e){w.validateCookieName(e),c.scheduleExecution(c.preCacheResponseActions,c.getRemoveResponseCookieAction(e))},c.removeResponseCookie=function(e){w.validateCookieName(e),c.scheduleExecution(c.postCacheResponseActions,c.getRemoveResponseCookieAction(e))},c.setUpstreamResponseHeader=function(e,t){return c.internalSetResponseHeader(e,t,!0,c.preCacheResponseActions)},c.updateUpstreamResponseHeader=function(e,t,r){return c.internalUpdateResponseHeader(e,t,r,c.preCacheResponseActions)},c.removeUpstreamResponseHeader=function(e){return c.internalRemoveResponseHeader(e,c.preCacheResponseActions)},c.setRequestHeader=function(e,t){w.validateSetRequestHeader(e),c.scheduleExecution(c.postCacheRequestActions,(function(){c.request.headers[e.toLowerCase()]=t}))},c.runImmediatelyDepthCounter=0,c.runImmediately=function(e){return i(c,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),++this.runImmediatelyDepthCounter,[4,e()];case 1:return t.sent(),[3,3];case 2:return--this.runImmediatelyDepthCounter,[7];case 3:return[2]}}))}))},c.scheduleExecution=function(e,t){c.runningImmediately?t():e.push(t)},c.updateRequestHeader=function(e,t,r){w.validateUpdateRequestHeader(e),c.scheduleExecution(c.postCacheRequestActions,(function(){var n=e.toLowerCase(),o=c.request.headers[n],i=c.interpolateParams(r);Array.isArray(o)?c.request.headers[n]=o.map((function(e){return e.replace(t,i)})):o&&(c.request.headers[n]=o.replace(t,i))}))},c.removeRequestHeader=function(e){w.validateRemoveRequestHeader(e),c.scheduleExecution(c.postCacheRequestActions,(function(){delete c.request.headers[e.toLowerCase()]}))},c.serviceWorker=function(e){c.cache({edge:{maxAgeSeconds:30758400},browser:{maxAgeSeconds:0}}),c.serveStatic(e)},c.appShell=function(e){c.setResponseHeader("content-type","text/html"),c.serveStatic(e)},c.allowCors=function(e){void 0===e&&(e={}),c.setResponseHeader("Access-Control-Allow-Origin",e.origin||"*"),e.methods&&c.setResponseHeader("Access-Control-Allow-Methods",e.methods.join(", ")),e.headers&&c.setResponseHeader("Access-Control-Allow-Headers",e.headers.join(", ")),e.maxAge&&c.setResponseHeader("Access-Control-Max-Age",e.maxAge.toString()),null!=e.credentials&&c.setResponseHeader("Access-Control-Allow-Credentials",e.credentials.toString())},c.send=function(e,t,r){void 0===t&&(t=200),c.setCreateResponseAction((function(){return i(c,void 0,void 0,(function(){return s(this,(function(n){return this.response.statusCode=t,this.response.statusMessage=r,this.response.body="function"==typeof e?e():e,[2]}))}))}))},c.compute=function(e){c.setCreateResponseAction((function(){return i(c,void 0,void 0,(function(){var t=this;return s(this,(function(r){switch(r.label){case 0:return this.createResponseAction=void 0,[4,this.runImmediately((function(){return e(t.request,t.response)}))];case 1:return r.sent(),"function"!=typeof this.createResponseAction?[3,3]:[4,this.createResponseAction()];case 2:return r.sent(),[3,4];case 3:throw new Error("compute() must send a response");case 4:return[2]}}))}))}))},c.onRouteError=function(e){var t={status:"error",message:e.message},r=e.isUserError;r&&console.error(k.errorLogLabel,e.message),"production"!==process.env.NODE_ENV&&(t={message:"An error occured while running route "+c.route.toString()+": "+e.message,stack:r?void 0:e.stack,url:c.request.url,route:{handler:c.route.handler.toString(),criteria:c.route.criteria}});try{c.response.setHeader(_.HTTP_HEADERS.contentType,"application/json"),c.response.writeHead(500),c.response.end(JSON.stringify(t))}catch(e){console.error(k.errorLogLabel,"Could not write error response because headers have already been sent.",t)}},c.request=t,c.response=r,c.route=n,c.context=o,c}return o(t,e),t.prototype.sendResponse=function(){return i(this,void 0,void 0,(function(){var e,t,r,n,o,i,a,u,l,f,p,h,d,v,y,g,m,b,x,w;return s(this,(function(s){switch(s.label){case 0:e=!1;try{for(t=c(this.preCacheRequestActions),r=t.next();!r.done;r=t.next())(0,r.value)()}catch(e){d={error:e}}finally{try{r&&!r.done&&(v=t.return)&&v.call(t)}finally{if(d)throw d.error}}return S.isCacheEnabled()&&(o=this.context.cacheKey||C.default.create(this.request,this.cacheKey),n=S.getCachedResponse(o),this.cacheKey&&(this.context.cacheKey=o),!this.validatePrefetch(n))?(console.log(k.infoLogLabel,"throttle "+this.request.url),[2,!0]):n?(e=!0,this.context.timing.edgeCache=R.CacheValue.hit,this.applyCachedResponse(n),e=!0,[3,4]):[3,1];case 1:try{for(i=c(this.postCacheRequestActions),a=i.next();!a.done;a=i.next())(0,a.value)()}catch(e){y={error:e}}finally{try{a&&!a.done&&(g=i.return)&&g.call(i)}finally{if(y)throw y.error}}return this.createResponseAction?[4,this.createResponseAction()]:[3,3];case 2:s.sent(),e=!0,s.label=3;case 3:try{for(u=c(this.preCacheResponseActions),l=u.next();!l.done;l=u.next())(0,l.value)()}catch(e){m={error:e}}finally{try{l&&!l.done&&(b=u.return)&&b.call(u)}finally{if(m)throw m.error}}s.label=4;case 4:e&&!this.streaming&&!n&&S.isCacheEnabled()&&(f=S.maybeCacheResponse({response:this.response,cacheKey:o,context:this.context}),this.context.timing.edgeCache=f?R.CacheValue.cached:R.CacheValue.pass);try{for(p=c(this.postCacheResponseActions),h=p.next();!h.done;h=p.next())(0,h.value)()}catch(e){x={error:e}}finally{try{h&&!h.done&&(w=p.return)&&w.call(p)}finally{if(x)throw x.error}}return e&&!this.streaming&&(S.isCacheEnabled()&&(this.response.setHeader("x-xdn-t",this.context.timing.toString()),console.log(k.infoLogLabel,this.context.timing.edgeCache+" "+this.request.url+" ("+this.response.getHeader(_.HTTP_HEADERS.xXdnCachingStatus)+")")),A.addTimings(this.response),this.response.statusCode&&this.response.writeHead(this.response.statusCode,this.response.statusMessage||void 0),this.response.end(this.response.body)),[2,e]}}))}))},t.prototype.applyCachedResponse=function(e){this.response.body=e.body,this.response.statusCode=e.statusCode,this.response.statusMessage=e.statusMessage;var t=e.getHeaders();for(var r in t)this.response.setHeader(r,t[r])},t.prototype.validatePrefetch=function(e){return!(Object.keys(this.request.query||{}).includes(_.PREFETCH_QUERY_PARAM)&&!e)||(this.response.writeHead(_.XDN_UNCACHED_PREFETCH_STATUS),this.response.end(),!1)},t.prototype.setCreateResponseAction=function(e){if(null!=this.createResponseAction)throw new Error("You may only call one of the following once in your route handler: proxy, serveStatic, serviceWorker, redirect, send.");this.createResponseAction=e},Object.defineProperty(t.prototype,"runningImmediately",{get:function(){return this.runImmediatelyDepthCounter>0},enumerable:!0,configurable:!0}),t}(r(74).BaseResponseWriter);function P(e){return g.default(e)&&(e={domainOrIp:e}),e}t.default=H},function(e,t,r){var n=t,o=r(15),i=r(34)._extend,s=r(238),a=/(^|,)\s*upgrade\s*($|,)/i,u=/^https|wss/;n.isSSL=u,n.setupOutgoing=function(e,t,r,c){e.port=t[c||"target"].port||(u.test(t[c||"target"].protocol)?443:80),["host","hostname","socketPath","pfx","key","passphrase","cert","ca","ciphers","secureProtocol"].forEach((function(r){e[r]=t[c||"target"][r]})),e.method=t.method||r.method,e.headers=i({},r.headers),t.headers&&i(e.headers,t.headers),t.auth&&(e.auth=t.auth),t.ca&&(e.ca=t.ca),u.test(t[c||"target"].protocol)&&(e.rejectUnauthorized=void 0===t.secure||t.secure),e.agent=t.agent||!1,e.localAddress=t.localAddress,e.agent||(e.headers=e.headers||{},"string"==typeof e.headers.connection&&a.test(e.headers.connection)||(e.headers.connection="close"));var l=t[c||"target"],f=l&&!1!==t.prependPath&&l.path||"",p=t.toProxy?r.url:o.parse(r.url).path||"";return p=t.ignorePath?"":p,e.path=n.urlJoin(f,p),t.changeOrigin&&(e.headers.host=s(e.port,t[c||"target"].protocol)&&!~e.host.indexOf(":")?e.host+":"+e.port:e.host),e},n.setupSocket=function(e){return e.setTimeout(0),e.setNoDelay(!0),e.setKeepAlive(!0,0),e},n.getPort=function(e){var t=e.headers.host?e.headers.host.match(/:(\d+)/):"";return t?t[1]:n.hasEncryptedConnection(e)?"443":"80"},n.hasEncryptedConnection=function(e){return Boolean(e.connection.encrypted||e.connection.pair)},n.urlJoin=function(){var e,t=Array.prototype.slice.call(arguments),r=t.length-1,n=t[r],o=n.split("?");return t[r]=o.shift(),(e=[t.filter(Boolean).join("/").replace(/\/+/g,"/").replace("http:/","http://").replace("https:/","https://")]).push.apply(e,o),e.join("?")},n.rewriteCookieProperty=function e(t,r,n){return Array.isArray(t)?t.map((function(t){return e(t,r,n)})):t.replace(new RegExp("(;\\s*"+n+"=)([^;]+)","i"),(function(e,t,n){var o;if(n in r)o=r[n];else{if(!("*"in r))return e;o=r["*"]}return o?t+o:""}))}},function(e,t){e.exports=function(e,t){return null==e||e!=e?t:e}},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t){var r="object"==typeof global&&global&&global.Object===Object&&global;e.exports=r},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){var n=r(111),o=r(20),i=r(1),s=r(21),a=r(25),u=r(23),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),l=!r&&o(e),f=!r&&!l&&s(e),p=!r&&!l&&!f&&u(e),h=r||l||f||p,d=h?n(e.length,String):[],v=d.length;for(var y in e)!t&&!c.call(e,y)||h&&("length"==y||f&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,v))||d.push(y);return d}},function(e,t,r){var n=r(138),o=r(4);e.exports=function e(t,r,i,s,a){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,i,s,e,a))}},function(e,t,r){var n=r(139),o=r(142),i=r(143);e.exports=function(e,t,r,s,a,u){var c=1&r,l=e.length,f=t.length;if(l!=f&&!(c&&f>l))return!1;var p=u.get(e),h=u.get(t);if(p&&h)return p==t&&h==e;var d=-1,v=!0,y=2&r?new n:void 0;for(u.set(e,t),u.set(t,e);++d<l;){var g=e[d],m=t[d];if(s)var b=c?s(m,g,d,t,e,u):s(g,m,d,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(y){if(!o(t,(function(e,t){if(!i(y,t)&&(g===e||a(g,e,r,s,u)))return y.push(t)}))){v=!1;break}}else if(g!==m&&!a(g,m,r,s,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},function(e,t,r){var n=r(2).Uint8Array;e.exports=n},function(e,t,r){var n=r(3);e.exports=function(e){return e==e&&!n(e)}},function(e,t){e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},function(e,t,r){var n=r(62);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},function(e,t,r){var n=r(43),o=r(11);e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[o(t[r++])];return r&&r==i?e:void 0}},function(e,t,r){var n=r(159);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n=r(43),o=r(20),i=r(1),s=r(25),a=r(39),u=r(11);e.exports=function(e,t,r){for(var c=-1,l=(t=n(t,e)).length,f=!1;++c<l;){var p=u(t[c]);if(!(f=null!=e&&r(e,p)))break;e=e[p]}return f||++c!=l?f:!!(l=null==e?0:e.length)&&a(l)&&s(p,l)&&(i(e)||o(e))}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,r){var n=r(6),o=r(1),i=r(4);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==n(e)}},function(e,t,r){var n=r(5),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,r){var n=r(69),o=r(24);e.exports=function(e,t){return e&&n(e,t,o)}},function(e,t,r){var n=r(174)();e.exports=n},function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(45),a=r(46),u=i(r(47)),c=i(r(175)),l=i(r(12)),f=i(r(180)),p=i(r(72)),h=i(r(73)),d=r(0),v=function(){function e(e,t){this.criteria=h.default(e),this.handler=t,this.criteria.path&&(this.matcher=new p.default(this.criteria.path))}return e.prototype.match=function(e){var t=this.matchPath(e);return!!(t&&this.matchProtocol(e)&&this.matchMethod(e)&&this.matchHeaders(e)&&this.matchQueryParams(e)&&this.matchCookies(e))&&(e.params=t,t)},e.prototype.matchPath=function(e){return this.matcher?this.matcher.match(e.path):{}},e.prototype.matchMethod=function(e){return!this.criteria.method||!e.method||new RegExp(this.criteria.method,"i").test(e.method)},e.testRegExp=function(e,t){return null!=t&&(e.global&&(e=new RegExp(e)),Array.isArray(t)?t.some((function(t){return e.test(t)})):e.test(t))},e.prototype.matchHeaders=function(t){return!this.criteria.headers||e.matchCriteriaRegexObjectWithRequestObject(this.criteria.headers,t.headers,f.default)},e.prototype.matchQueryParams=function(t){return!this.criteria.query||!!t.query&&e.matchCriteriaRegexObjectWithRequestObject(this.criteria.query,t.query)},e.prototype.matchCookies=function(t){if(this.criteria.cookies){var r=t.headers.cookie;if(null==r)return c.default(this.criteria.cookies,(function(e){return null===e}));var n=Array.isArray(r)?r.join("; "):r,o=s.parse(n);return e.matchCriteriaRegexObjectWithRequestObject(this.criteria.cookies,o)}return!0},e.prototype.matchProtocol=function(t){var r,n=t.headers&&t.headers[d.HTTP_HEADERS.xXdnProtocol]||"https";return r="string"==typeof this.criteria.protocol?new RegExp("^"+this.criteria.protocol+"$","i"):new RegExp(this.criteria.protocol||"^https$","i"),e.testRegExp(r,n)},e.prototype.toString=function(){var e=this.criteria,t=e.path,r=n(e,["path"]);return Object.keys(r).length?JSON.stringify(this.criteria):t},e.prototype.toRegex=function(){return this.criteria.path?a.pathToRegexp(this.criteria.path):/^.*$/},e.prototype.toJson=function(){return JSON.stringify(this.criteria,(function(e,t){return t instanceof RegExp?t.toString():t}))},e.prototype.toRegexString=function(){return this.toRegex().source},e.prototype.toEdgeRegexString=function(){return u.default(this.toRegex())},e.matchCriteriaRegexObjectWithRequestObject=function(t,r,n){return void 0===n&&(n=l.default),c.default(Object.entries(t),(function(t){var i=o(t,2),s=i[0],a=i[1],u=r[n(s)];return null===a?void 0===u:e.testRegExp(a,u)}))},e}();t.default=v},function(e,t,r){var n=r(10),o=r(7),i=r(25),s=r(3);e.exports=function(e,t,r){if(!s(r))return!1;var a=typeof t;return!!("number"==a?o(r)&&i(t,r.length):"string"==a&&t in r)&&n(r[t],e)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var s=r(46),a=function(e){function t(t){var r=e.call(this,t)||this;return r.isUserError=!0,r}return o(t,e),t}(Error),u=function(){function e(e){this.pattern=e}return e.prototype.match=function(t){if(!this.matcher)try{this.matcher=s.match(this.pattern,{decode:decodeURIComponent})}catch(e){throw new a('Route pattern "'+this.pattern+'" contains invalid syntax.')}e.validatePattern(this.pattern);var r=this.matcher(t);return r?r.params:void 0},e.validatePattern=function(e){var t=e.match(this.PARTIAL_SPLAT_ROUTE);if(t){var r=i(t,3),n=(r[0],r[1]),o=r[2],s=e.replace(""+n+o,n+":suffix/"+o);throw new a('Partial splat routes are not supported. Use "'+s+'" instead of "'+e+'"')}return!0},e.PARTIAL_SPLAT_ROUTE=/(\/[^:/]+)(:[^*/#?]+\*)/,e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null==e?{}:"string"==typeof e?{path:e}:e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){}return e.prototype.cache=function(e){},e.prototype.redirect=function(e,t){},e.prototype.proxy=function(e,t){},e.prototype.render=function(e){},e.prototype.stream=function(e){},e.prototype.serveStatic=function(e){},e.prototype.updatePath=function(e){},e.prototype.rewrite=function(e,t){},e.prototype.setRequestHeader=function(e,t){},e.prototype.updateRequestHeader=function(e,t,r){},e.prototype.removeRequestHeader=function(e){},e.prototype.setUpstreamResponseHeader=function(e,t){},e.prototype.updateUpstreamResponseHeader=function(e,t,r){},e.prototype.removeUpstreamResponseHeader=function(e){},e.prototype.setResponseHeader=function(e,t){},e.prototype.updateResponseHeader=function(e,t,r){},e.prototype.removeResponseHeader=function(e){},e.prototype.addResponseCookie=function(e,t){},e.prototype.updateResponseCookie=function(e,t,r){},e.prototype.removeResponseCookie=function(e){},e.prototype.addUpstreamResponseCookie=function(e,t){},e.prototype.updateUpstreamResponseCookie=function(e,t,r){},e.prototype.removeUpstreamResponseCookie=function(e){},e.prototype.send=function(e,t,r){},e.prototype.compute=function(e){},e.prototype.serviceWorker=function(e){},e.prototype.allowCors=function(e){},e}();t.BaseResponseWriter=n},function(e,t,r){var n=r(31),o=r(10),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var s=e[t];i.call(e,t)&&o(s,r)&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t,r){var n=r(186),o=r(64);e.exports=function(e,t){return null!=e&&o(e,t,n)}},function(e,t,r){var n=r(31),o=r(10);e.exports=function(e,t,r){(void 0!==r&&!o(e[t],r)||void 0===r&&!(t in e))&&n(e,t,r)}},function(e,t,r){var n=r(52)(Object.getPrototypeOf,Object);e.exports=n},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,r){var n=r(55),o=r(200),i=r(7);e.exports=function(e){return i(e)?n(e,!0):o(e)}},function(e,t,r){"use strict";const n=r(215),o=r(216),i=r(220).stdout,s=r(222),a="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),u=["ansi","ansi","ansi256","ansi16m"],c=new Set(["gray"]),l=Object.create(null);function f(e,t){t=t||{};const r=i?i.level:0;e.level=void 0===t.level?r:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function p(e){if(!this||!(this instanceof p)||this.template){const t={};return f(t,e),t.template=function(){const e=[].slice.call(arguments);return y.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,p.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=p,t.template}f(this,e)}a&&(o.blue.open="[94m");for(const e of Object.keys(o))o[e].closeRe=new RegExp(n(o[e].close),"g"),l[e]={get(){const t=o[e];return d.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};l.visible={get(){return d.call(this,this._styles||[],!0,"visible")}},o.color.closeRe=new RegExp(n(o.color.close),"g");for(const e of Object.keys(o.color.ansi))c.has(e)||(l[e]={get(){const t=this.level;return function(){const r=o.color[u[t]][e].apply(null,arguments),n={open:r,close:o.color.close,closeRe:o.color.closeRe};return d.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});o.bgColor.closeRe=new RegExp(n(o.bgColor.close),"g");for(const e of Object.keys(o.bgColor.ansi)){if(c.has(e))continue;l["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const r=o.bgColor[u[t]][e].apply(null,arguments),n={open:r,close:o.bgColor.close,closeRe:o.bgColor.closeRe};return d.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}}}const h=Object.defineProperties(()=>{},l);function d(e,t,r){const n=function(){return v.apply(n,arguments)};n._styles=e,n._empty=t;const o=this;return Object.defineProperty(n,"level",{enumerable:!0,get:()=>o.level,set(e){o.level=e}}),Object.defineProperty(n,"enabled",{enumerable:!0,get:()=>o.enabled,set(e){o.enabled=e}}),n.hasGrey=this.hasGrey||"gray"===r||"grey"===r,n.__proto__=h,n}function v(){const e=arguments,t=e.length;let r=String(arguments[0]);if(0===t)return"";if(t>1)for(let n=1;n<t;n++)r+=" "+e[n];if(!this.enabled||this.level<=0||!r)return this._empty?"":r;const n=o.dim.open;a&&this.hasGrey&&(o.dim.open="");for(const e of this._styles.slice().reverse())r=e.open+r.replace(e.closeRe,e.open)+e.close,r=r.replace(/\r?\n/g,`${e.close}$&${e.open}`);return o.dim.open=n,r}function y(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const r=[].slice.call(arguments,2),n=[t.raw[0]];for(let e=1;e<t.length;e++)n.push(String(r[e-1]).replace(/[{}\\]/g,"\\$&")),n.push(String(t.raw[e]));return s(e,n.join(""))}Object.defineProperties(p.prototype,l),e.exports=p(),e.exports.supportsColor=i,e.exports.default=e.exports},function(e,t,r){var n=r(218),o={};for(var i in n)n.hasOwnProperty(i)&&(o[n[i]]=i);var s=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var u=s[a].channels,c=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:u}),Object.defineProperty(s[a],"labels",{value:c})}s.rgb.hsl=function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,s=Math.min(n,o,i),a=Math.max(n,o,i),u=a-s;return a===s?t=0:n===a?t=(o-i)/u:o===a?t=2+(i-n)/u:i===a&&(t=4+(n-o)/u),(t=Math.min(60*t,360))<0&&(t+=360),r=(s+a)/2,[t,100*(a===s?0:r<=.5?u/(a+s):u/(2-a-s)),100*r]},s.rgb.hsv=function(e){var t,r,n,o,i,s=e[0]/255,a=e[1]/255,u=e[2]/255,c=Math.max(s,a,u),l=c-Math.min(s,a,u),f=function(e){return(c-e)/6/l+.5};return 0===l?o=i=0:(i=l/c,t=f(s),r=f(a),n=f(u),s===c?o=n-r:a===c?o=1/3+t-n:u===c&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*c]},s.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2];return[s.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(r,n))),100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},s.rgb.cmyk=function(e){var t,r=e[0]/255,n=e[1]/255,o=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-o)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},s.rgb.keyword=function(e){var t=o[e];if(t)return t;var r,i,s,a=1/0;for(var u in n)if(n.hasOwnProperty(u)){var c=n[u],l=(i=e,s=c,Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)+Math.pow(i[2]-s[2],2));l<a&&(a=l,r=u)}return r},s.keyword.rgb=function(e){return n[e]},s.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},s.rgb.lab=function(e){var t=s.rgb.xyz(e),r=t[0],n=t[1],o=t[2];return n/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},s.hsl.rgb=function(e){var t,r,n,o,i,s=e[0]/360,a=e[1]/100,u=e[2]/100;if(0===a)return[i=255*u,i,i];t=2*u-(r=u<.5?u*(1+a):u+a-u*a),o=[0,0,0];for(var c=0;c<3;c++)(n=s+1/3*-(c-1))<0&&n++,n>1&&n--,i=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,o[c]=255*i;return o},s.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=r,i=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,o*=i<=1?i:2-i,[t,100*(0===n?2*o/(i+o):2*r/(n+r)),100*((n+r)/2)]},s.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*i),u=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,u,s];case 1:return[a,n,s];case 2:return[s,n,u];case 3:return[s,a,n];case 4:return[u,s,n];case 5:return[n,s,a]}},s.hsv.hsl=function(e){var t,r,n,o=e[0],i=e[1]/100,s=e[2]/100,a=Math.max(s,.01);return n=(2-i)*s,r=i*a,[o,100*(r=(r/=(t=(2-i)*a)<=1?t:2-t)||0),100*(n/=2)]},s.hwb.rgb=function(e){var t,r,n,o,i,s,a,u=e[0]/360,c=e[1]/100,l=e[2]/100,f=c+l;switch(f>1&&(c/=f,l/=f),n=6*u-(t=Math.floor(6*u)),0!=(1&t)&&(n=1-n),o=c+n*((r=1-l)-c),t){default:case 6:case 0:i=r,s=o,a=c;break;case 1:i=o,s=r,a=c;break;case 2:i=c,s=r,a=o;break;case 3:i=c,s=o,a=r;break;case 4:i=o,s=c,a=r;break;case 5:i=r,s=c,a=o}return[255*i,255*s,255*a]},s.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},s.xyz.rgb=function(e){var t,r,n,o=e[0]/100,i=e[1]/100,s=e[2]/100;return r=-.9689*o+1.8758*i+.0415*s,n=.0557*o+-.204*i+1.057*s,t=(t=3.2406*o+-1.5372*i+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},s.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},s.lab.xyz=function(e){var t,r,n,o=e[0];t=e[1]/500+(r=(o+16)/116),n=r-e[2]/200;var i=Math.pow(r,3),s=Math.pow(t,3),a=Math.pow(n,3);return r=i>.008856?i:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},s.lab.lch=function(e){var t,r=e[0],n=e[1],o=e[2];return(t=360*Math.atan2(o,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+o*o),t]},s.lch.lab=function(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]},s.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],o=1 in arguments?arguments[1]:s.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return 2===o&&(i+=60),i},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},s.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},s.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},s.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map((function(e){return e+e})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},s.rgb.hcg=function(e){var t,r=e[0]/255,n=e[1]/255,o=e[2]/255,i=Math.max(Math.max(r,n),o),s=Math.min(Math.min(r,n),o),a=i-s;return t=a<=0?0:i===r?(n-o)/a%6:i===n?2+(o-r)/a:4+(r-n)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?s/(1-a):0)]},s.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,o=0;return(n=r<.5?2*t*r:2*t*(1-r))<1&&(o=(r-.5*n)/(1-n)),[e[0],100*n,100*o]},s.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},s.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var o,i=[0,0,0],s=t%1*6,a=s%1,u=1-a;switch(Math.floor(s)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=u,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=u,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=u}return o=(1-r)*n,[255*(r*i[0]+o),255*(r*i[1]+o),255*(r*i[2]+o)]},s.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},s.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},s.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},s.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=s.gray.hsv=function(e){return[0,0,e[0]]},s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(45)),i=r(230),s=n(r(12));t.default=function e(t,r,n){if("string"==typeof n)return function(e,t,r){var n=r.replace(/\\\${/g,"--backslashdollar--").replace(/\${/g,"--separator--${").split("--separator--"),a={};(null==e?void 0:e.headers.cookie)&&(a=o.default.parse(e.headers.cookie,{decode:s.default}));var u={};if(null==e?void 0:e.url){var c=e.url.indexOf("?");if(c>=0){var l=e.url.substring(c+1);u=i.parse(l)}}var f=[],p="${req:".length,h="${query:".length;return n.forEach((function(n){if(e){var o=(n=(n=(n=n.replace(/\${method}/,e.method)).replace(/\${path}/,e.path)).replace(/\${url}/,e.url)).search(/\${query:/);if(o>=0){var i=n.substring(o+h),s=i.indexOf("}");if(s<=0)throw new Error('Cannot interpolate substring "'+n+'" of value "'+r+'"');i=i.substring(0,s);var c=u[i]||"";Array.isArray(c)&&(c=c[0]),n=n.replace(/\${query:.*?}/,c)}var l=n.search(/\${req:/);if(l>=0){var d=n.substring(l+p),v=d.indexOf("}");if(v<=0)throw new Error('Cannot interpolate substring "'+n+'" of value "'+r+'"');var y="";if(0===(d=d.substring(0,v)).indexOf("cookie:")){var g=d.split(":")[1];y=a[g]||""}else y=e.headers[d]||"";n=n.replace(/\${req:.*?}/,y)}}var m=n.search(/\${res:/);if(m>=0){if(!t)throw new Error('Cannot interpolate response parameter "'+n+'" during receive phase');var b=n.substring(m+p),_=b.indexOf("}");if(_<=0)throw new Error('Cannot interpolate substring "'+n+'" of value "'+r+'"');b=b.substring(0,_),n=n.replace(/\${res:.*?}/,t.getHeader(b)||"")}if(n.search(/\${/)>=0)throw new Error('Cannot interpolate substring "'+n+'" of "'+r+'"');f.push(n)})),f.join("").replace(/--backslashdollar--/g,"${")}(t,r,n);if(!Array.isArray(n))return n;var a=[];return n.forEach((function(n){a.push(e(t,r,n))})),a}},function(e,t,r){var n;function o(e){function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var i=s[u];r=o.call(e,i),s.splice(u,1),u--}return r})),t.formatArgs.call(e,s);var c=r.log||t.log||console.log.bind(console);c.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&("-"===(e=r[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(245),t.names=[],t.skips=[],t.formatters={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[/^x-xdn-/i,/^host$/i,/^x-request-id$/i],o=[/^xdn_/i],i=function(e){if(n.find((function(t){return e.match(t)})))throw new Error('Header "'+e+'" is reserved and cannot be modified')};t.validateSetResponseHeader=function(e){i(e)},t.validateUpdateResponseHeader=function(e){i(e)},t.validateRemoveResponseHeader=function(e){i(e)},t.validateSetRequestHeader=function(e){i(e)},t.validateUpdateRequestHeader=function(e){i(e)},t.validateRemoveRequestHeader=function(e){i(e)},t.validateCookieName=function(e){!function(e){if(o.find((function(t){return e.match(t)})))throw new Error('Cookie "'+e+'" is reserved and cannot be modified')}(e)}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.hit="hit",e.pass="pass",e.cached="cached"}(n=t.CacheValue||(t.CacheValue={}));var o=function(){function e(){this.edgeCache=n.pass}return e.prototype.toString=function(){return"oc="+this.edgeCache},e}();t.default=o},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,u=s(r(252)),c=r(33),l=r(0);function f(){return function(){if(c.isCloud())throw new Error("The development cache should not be used in the cloud.")}(),a||(a=new u.default),a}function p(e){var t,r,n,s,a={};if(e){Array.isArray(e)||(e=[e]);var u={};try{for(var c=o(e),l=c.next();!l.done;l=c.next()){var f=l.value.split(/,\s*/).map((function(e){return e.split(/=/)}));try{for(var p=(n=void 0,o(f)),h=p.next();!h.done;h=p.next()){var d=i(h.value,2),v=d[0],y=d[1];u[v.toLowerCase()]=y}}catch(e){n={error:e}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}u.hasOwnProperty("private")&&(a.private=!0),a.maxAge=parseInt(u["s-maxage"]||u["max-age"]||"0")}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}}return a}t.isCacheEnabled=function(){return!c.isCloud()&&"true"===process.env.XDN_CACHE},t.getCache=f,t.clearCache=function(){f().reset()},t.getCachedResponse=function(e){return f().get(e.toString())},t.maybeCacheResponse=function(e){var t,r=e.response,o=e.cacheKey,i=e.context,s=null===(t=o.method)||void 0===t?void 0:t.toLowerCase();if(s&&!l.CACHEABLE_METHODS.has(s)&&i.cacheRouteMethod!==s)return r.setHeader(l.HTTP_HEADERS.xXdnCachingStatus,l.CACHING_STATUS.method),!1;if(o.body&&Buffer.from(o.body,"utf8").length>8e3)return r.setHeader(l.HTTP_HEADERS.xXdnCachingStatus,l.CACHING_STATUS.bodyTooBig),!1;if(r.statusCode&&r.statusCode>=400)return r.setHeader(l.HTTP_HEADERS.xXdnCachingStatus,l.CACHING_STATUS.code),!1;if(r.getHeader("set-cookie"))return r.setHeader(l.HTTP_HEADERS.xXdnCachingStatus,l.CACHING_STATUS.setCookie),!1;var a=function(e){return n(n(n({},{private:!1,maxAge:0}),p(e.getHeader(l.HTTP_HEADERS.cacheControl))),p(e.getHeader(l.HTTP_HEADERS.xXdnCacheControl)))}(r);return a.private&&!i.forcePrivateCaching?(r.setHeader(l.HTTP_HEADERS.xXdnCachingStatus,l.CACHING_STATUS.private),!1):a.maxAge?(f().set(o.toString(),r,1e3*a.maxAge),r.setHeader(l.HTTP_HEADERS.xXdnCachingStatus,l.CACHING_STATUS.ok),!0):(r.setHeader(l.HTTP_HEADERS.xXdnCachingStatus,l.CACHING_STATUS.noMaxAge),!1)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0);global.__xdn_user_timings__||(global.__xdn_user_timings__=[],global.__xdn_internal_timings__=[]);var u=global.__xdn_user_timings__,c=global.__xdn_internal_timings__;t.NOT_ENDED_VALUE="na";var l=function(){function e(e,t){void 0===t&&(t=!0),this.duration=0,this.ended=!1,this.name=e,(t?c:u).push(this)}return e.prototype.start=function(){return this.startTime=new Date,this.ended=!1,this},e.prototype.end=function(){return this.startTime?(this.ended=!0,this.duration+=(new Date).getTime()-this.startTime.getTime(),this):(console.warn("Timing "+this.name+" not started."),this)},e.prototype.pause=function(){return this.end()},e.prototype.resume=function(){return this.start()},Object.defineProperty(e.prototype,"value",{get:function(){return this.ended?this.duration:t.NOT_ENDED_VALUE},enumerable:!0,configurable:!0}),e}();function f(e){return e.map((function(e){return e.name+"="+e.value})).join(",")}t.InternalTiming=l,t.resetTimings=function(){u.length=0,c.length=0},t.addTimings=function(e){u.length&&(e.setHeader(a.HTTP_HEADERS.xXdnUserT,f(u)),e.setHeader(a.HTTP_HEADERS.serverTiming,function(e){var t=e.getHeader(a.HTTP_HEADERS.serverTiming),r=u.map((function(e){return e.name+";dur="+e.value}));Array.isArray(t)?r.push.apply(r,s(t)):t&&r.push(t);return r.join(", ")}(e))),c.length&&e.setHeader(a.HTTP_HEADERS.xXdnT,f(c))};var p=function(e){function t(t){return e.call(this,t,!1)||this}return o(t,e),t}(l);t.default=p},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(86)),i=function(){this.timing=new o.default,this.forcePrivateCaching=!1};t.default=i},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(263)),u=r(45);t.CUSTOM_CACHE_KEY_ACTIONS={blacklistAll:"blacklist-all-query-parameters",blacklistSome:"blacklist-some-query-parameters",whitelistSome:"whitelist-some-query-parameters",addValue:"add-value",removeMethod:"remove-method",removeBody:"remove-body"};var c=function(){function e(){this.config=[],this.actions=[]}return e.prototype.clone=function(){var t=new e;return t.actions=this.actions,t.config=this.config,t},e.prototype.excludeAllQueryParameters=function(){return this.config.push({action:t.CUSTOM_CACHE_KEY_ACTIONS.blacklistAll}),this.actions.push((function(e,t){e.query={}})),this},e.prototype.excludeQueryParameters=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.config.push({action:t.CUSTOM_CACHE_KEY_ACTIONS.blacklistSome,names:e}),this.actions.push((function(t,r){var o,i;try{for(var s=n(e),a=s.next();!a.done;a=s.next()){var u=a.value;delete t.query[u]}}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}})),this},e.prototype.excludeAllQueryParametersExcept=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.config.push({action:t.CUSTOM_CACHE_KEY_ACTIONS.whitelistSome,names:e}),this.actions.push((function(t,r){var n=new Set(e);for(var o in t.query)n.has(o)||delete t.query[o]})),this},e.prototype.addHeader=function(e,t){var r=this;return this.actions.push((function(n,o){var i=o.headers[e];Array.isArray(i)||(i=[i]),n.headers[e]=t?r.createGroupedValue(t,i):i})),this.addValue("${req:"+e+"}",t)},e.prototype.removeMethod=function(){return this.actions.push((function(e,t){e.method=void 0})),this.config.push({action:t.CUSTOM_CACHE_KEY_ACTIONS.removeMethod}),this},e.prototype.removeBody=function(){return this.actions.push((function(e,t){e.body=void 0})),this.config.push({action:t.CUSTOM_CACHE_KEY_ACTIONS.removeBody}),this},e.prototype.createGroupedValue=function(e,t){var r=new a.default,n=[];e(r);var o=this.findMatchingGroup(r,t);return o?n.push(o):n.push.apply(n,i(t)),n},e.prototype.findMatchingGroup=function(e,t){var r,o,i,s,a;try{for(var u=n(e.groups),c=u.next();!c.done;c=u.next()){var l=c.value;try{for(var f=(i=void 0,n(t)),p=f.next();!p.done;p=f.next()){var h=p.value;if(null===(a=l.pattern)||void 0===a?void 0:a.test(h))return l.name}}catch(e){i={error:e}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}},e.prototype.addDevice=function(){return this.addHeader("x-xdn-device")},e.prototype.addVendor=function(){return this.addHeader("x-xdn-vendor")},e.prototype.addIsBot=function(){return this.addHeader("x-xdn-device-is-bot")},e.prototype.addBrowser=function(){return this.addHeader("x-xdn-browser")},e.prototype.addCookie=function(e,t){var r=this;return this.actions.push((function(n,o){var i=o.headers.cookie||"";Array.isArray(i)&&(i=i.join(";"));var s=u.parse(i)[e];n.cookies[e]=t?r.createGroupedValue(t,[s]):s})),this.addValue("${req:cookie:"+e+"}",t)},e.prototype.addValue=function(e,r){var n={action:t.CUSTOM_CACHE_KEY_ACTIONS.addValue,value:e};if(null!=r){var o=new a.default;r(o),n.groups=o.toJSON()}return this.config.push(n),this},e.prototype.getActions=function(){return this.actions},e.prototype.toJSON=function(){return this.config},e}();t.default=c},function(e,t,r){const{Router:n}=r(92);e.exports=(new n).fallback(({proxy:e})=>e("origin"))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(93);t.Router=n.default;var o=r(90);t.CustomCacheKey=o.default;var i=r(49);t.ResponseWriter=i.default;var s=r(265);t.createCustomCacheKey=s.default},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var f=c(r(51)),p=c(r(94)),h=c(r(24)),d=c(r(112)),v=c(r(166)),y=r(0),g=c(r(171)),m=c(r(183)),b=c(r(13)),_=c(r(214)),x=c(r(83)),w=c(r(258)),E=c(r(49)),R=l(r(259)),S=c(r(260)),C=r(267),A=c(r(89)),O=c(r(261)),T=r(88),k=function(){function e(e){var t=this;void 0===e&&(e={excludeBuiltInRoutes:!1}),this.routeGroups=new S.default,this.preloadRequests=new O.default,this.plugins=[],this.destinations={},this.nextRouterIndex=0,this._index=0,this.processRequestHeaders=function(e){e.headers[y.HTTP_HEADERS.xRequestId]||(t.newRequestId=C.v4(),e.headers[y.HTTP_HEADERS.xRequestId]=t.newRequestId);var r=e.headers[y.HTTP_HEADERS.acceptEncoding];"string"==typeof r&&/gzip/.test(r)?e.headers[y.HTTP_HEADERS.acceptEncoding]="gzip":delete e.headers[y.HTTP_HEADERS.acceptEncoding];var n=e.connection,o="127.0.0.1";if(n&&n.remoteAddress){if(o=n.remoteAddress,"http"!==e.headers[y.HTTP_HEADERS.xXdnProtocol]){var i=e.headers[y.HTTP_HEADERS.cookie];"string"==typeof i&&/\blocal_xdn_emulate_http_protocol=true\b/.test(i)?e.headers[y.HTTP_HEADERS.xXdnProtocol]="http":e.headers[y.HTTP_HEADERS.xXdnProtocol]="https"}}else e.headers[y.HTTP_HEADERS.xXdnProtocol]||(e.headers[y.HTTP_HEADERS.xXdnProtocol]="https");e.headers[y.HTTP_HEADERS.xForwardedFor]?e.headers[y.HTTP_HEADERS.xForwardedFor]=e.headers[y.HTTP_HEADERS.xForwardedFor]+", "+o:e.headers[y.HTTP_HEADERS.xForwardedFor]=""+o,e.headers[y.HTTP_HEADERS.xXdnClientIp]||(e.headers[y.HTTP_HEADERS.xXdnClientIp]=e.headers[y.HTTP_HEADERS.xForwardedFor].split(",")[0]),t.processRequestDeviceHeaders(e),t.processRequestGeoHeaders(e)},this.processRequestDeviceHeaders=function(e){var t="desktop",r="generic",n=!1,o="generic",i=(e.headers[y.HTTP_HEADERS.userAgent]||"").toLowerCase();/ipad/.test(i)?(t="tablet",r="apple"):/ip(hone|od)/.test(i)?(t="smartphone",r="apple"):/android.*(mobile|mini)/.test(i)?(t="smartphone",r="android"):/android/.test(i)?(t="tablet",r="android"):/opera mobi/.test(i)?(t="smartphone",r="android"):/playbook u rim tablet/.test(i)?(t="tablet",r="blackberry"):/hp-tablet.*touchpad/.test(i)?(t="tablet",r="hp"):/kindle\/3/.test(i)?(t="tablet",r="kindle"):/mobile.+firefox/.test(i)?(t="mobile",r="firefoxos"):/^htc/.test(i)?(t="smartphone",r="htc"):/fennec/.test(i)?(t="smartphone",r="fennec"):/iemobile/.test(i)?(t="smartphone",r="microsoft"):/blackberry/.test(i)||/bb10.*mobile/.test(i)?(t="smartphone",r="blackberry"):/gt-.*build\/gingerbread/.test(i)?(t="smartphone",r="android"):/symbianos.*applewebkit/.test(i)?(t="smartphone",r="symbian"):(/symbian/.test(i)||/^sonyericsson/.test(i)||/^nokia/.test(i)||/^samsung/.test(i)||/^lg/.test(i)||/bada/.test(i)||/blazer/.test(i)||/cellphone/.test(i)||/midp-2.0/.test(i)||/u990/.test(i)||/netfront/.test(i)||/opera mini/.test(i)||/palm/.test(i)||/nintendo wii/.test(i)||/playstation portable/.test(i)||/portalmmm/.test(i)||/proxinet/.test(i)||/sonyericsson/.test(i)||/windows\ ?ce/.test(i)||/winwap/.test(i)||/eudoraweb/.test(i)||/240x320/.test(i)||/avantgo/.test(i))&&(t="mobile"),n=!!(/bot/.test(i)||/crawler/.test(i)||/headless/.test(i)||/prerender/.test(i)||/preview/.test(i)||/scanner/.test(i)||/slurp/.test(i)||/spider/.test(i)||/(developers.google.com\/+\/web\/snippet|embedly|facebookexternalhit|flipboard|googlepagespeed|google page speed)/.test(i)||/(ia_archiver|moov-prerender-cache-exerciser|nuzzel|outbrain|pinterest|qwantify|tumblr|vkshare)/.test(i)||/(w3c_validator|whatsapp|xing-contenttabreceiver|yahoo)/.test(i)),/edge/.test(i)?o="edge":/chrome|chromium|crios/.test(i)?o="chrome":/firefox/.test(i)?o="firefox":/opera|opr/.test(i)?o="opera":/msie/.test(i)||/trident/.test(i)?o="msie":/safari/.test(i)&&(o="safari"),e.headers[y.HTTP_HEADERS.xXdnDevice]=t,e.headers[y.HTTP_HEADERS.xXdnDeviceIsBot]=n?"1":"0",e.headers[y.HTTP_HEADERS.xXdnVendor]=r,e.headers[y.HTTP_HEADERS.xXdnBrowser]=o},this.processRequestGeoHeaders=function(e){e.headers[y.HTTP_HEADERS.xXdnGeoCity]="San Francisco",e.headers[y.HTTP_HEADERS.xXdnGeoCountryCode]="US",e.headers[y.HTTP_HEADERS.xXdnGeoLatitude]="37.792094",e.headers[y.HTTP_HEADERS.xXdnGeoLongitude]="-122.401622",e.headers[y.HTTP_HEADERS.xXdnGeoPostalCode]="94104"},this.isUserHeaderCountWithinLimits=function(e){return h.default(e).filter((function(e){return 0!==e.toLowerCase().indexOf(y.XDN_HEADERS_PREFIX)})).length<=y.XDN_MAX_USER_HEADERS_ALLOWED},this.patchResWriteHead=function(e,r){var n=r.writeHead;r.writeHead=function(){for(var o,i,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];r.writeHead=n,t.newRequestId&&r.setHeader(y.HTTP_HEADERS.xRequestId,t.newRequestId);var l=2,f=a[l];if(f)try{for(var p=s(h.default(f)),d=p.next();!d.done;d=p.next()){var v=d.value;r.setHeader(v,x.default(e,r,f[v]))}}catch(e){o={error:e}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}t.isUserHeaderCountWithinLimits(r.getHeaders())?r.writeHead.apply(r,u(a)):r.writeHead(y.XDN_TOO_MANY_HEADERS_STATUS_CODE,"Too many response headers")}},this.run=function(e,r){return o(t,void 0,void 0,(function(){var t,n,o,a,u,c,l,g,b,_,x,R,S,C,O=this;return i(this,(function(i){switch(i.label){case 0:return t=new T.InternalTiming("wr").start(),n=this,o=new A.default,this.processRequestHeaders(e),this.isUserHeaderCountWithinLimits(e.headers)?[4,w.default(e)]:(r.writeHead(y.XDN_TOO_MANY_HEADERS_STATUS_CODE,"Too many request headers"),r.end(),[2]);case 1:if(i.sent(),this.patchResWriteHead(e,r),v.default(this.destinations)>1&&(a=process.env.XDN_ROUTER_DESTINATION,u=f.default(e.headers[y.HTTP_HEADERS.xXdnDestination],a),p.default(u)&&(u=d.default(h.default(this.destinations),(function(e){return O.destinations[e]._index}))),!(n=this.destinations[u])))throw new Error('Routing destination "'+u+'" not found.');n.plugins.forEach((function(t){return t.onRequest(e)})),i.label=2;case 2:i.trys.push([2,10,11,12]),c=s(n.routeGroups.getRoutes()),l=c.next(),i.label=3;case 3:if(l.done)return[3,9];g=l.value,b=new E.default(e,r,g,o),this.isRequestFromEdge(e)&&(b=m.default.create(b)),i.label=4;case 4:return i.trys.push([4,7,,8]),g.match(e)?(t.pause(),[4,g.handler(b)]):[3,8];case 5:return i.sent(),[4,b.sendResponse()];case 6:return _=i.sent(),t.resume(),_?[2]:[3,8];case 7:return x=i.sent(),void 0!==b&&b.onRouteError(x),[2];case 8:return l=c.next(),[3,3];case 9:return[3,12];case 10:return R=i.sent(),S={error:R},[3,12];case 11:try{l&&!l.done&&(C=c.return)&&C.call(c)}finally{if(S)throw S.error}return[7];case 12:return t.end(),this.builtInFallback(e,r),[2]}}))}))},e.excludeBuiltInRoutes||g.default(this)}return e.prototype.getStaticAssetManifest=function(){return R.staticAssetManifest},e.prototype.setBackend=function(e,t){return b.default.get("backends")[e]=t,this},e.prototype.use=function(e){return e.onRegister(this),this.plugins.push(e),this},e.prototype.destination=function(e,t){return t.setIndex(this.nextRouterIndex++),this.destinations[e]=t,this},e.prototype.getPlugins=function(){var e,t,r=this.plugins;try{for(var n=s(Object.values(this.destinations)),o=n.next();!o.done;o=n.next()){var i=o.value;r=r.concat(i.getPlugins())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},e.prototype.setIndex=function(e){this._index=e},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e.prototype.group=function(e,t){if(this.routeGroups.findByName(y.ROUTES_FALLBACK))throw new Error("Routes cannot be added after the 'fallback' route as they would be unreachable.");var r=new R.default(e);return t(r),this.routeGroups.add(r),this},e.prototype.match=function(e,t){return this.group("root",(function(r){return r.match(e,t)}))},e.prototype.prerender=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this.preloadRequests).push.apply(e,u(t)),this},e.prototype.matchMethod=function(e,t,r){if("string"==typeof t)return this.match({method:e,path:t},r);if(t.method)throw new Error("Invalid criteria property method passed to call to Router#"+e+". Specifying a method in the criteria is redundant.");return this.match(n(n({},t),{method:e}),r)},e.prototype.head=function(e,t){return this.matchMethod(y.HTTP_METHODS.head,e,t)},e.prototype.get=function(e,t){return this.matchMethod(y.HTTP_METHODS.get,e,t)},e.prototype.post=function(e,t){return this.matchMethod(y.HTTP_METHODS.post,e,t)},e.prototype.delete=function(e,t){return this.matchMethod(y.HTTP_METHODS.delete,e,t)},e.prototype.put=function(e,t){return this.matchMethod(y.HTTP_METHODS.put,e,t)},e.prototype.patch=function(e,t){return this.matchMethod(y.HTTP_METHODS.patch,e,t)},e.prototype.options=function(e,t){return this.matchMethod(y.HTTP_METHODS.options,e,t)},e.prototype.fallback=function(e){return this.routeGroups.clearFallbacks(),this.group(y.ROUTES_FALLBACK,(function(t){return t.match(null,e)})),this},e.prototype.builtInFallback=function(e,t){var r=e.connection;r&&r.remoteAddress?t.writeHead(404):"http"===e.headers[y.HTTP_HEADERS.xXdnProtocol]?(t.setHeader(y.HTTP_HEADERS.location,"https://"+e.headers[y.HTTP_HEADERS.host]+e.url),t.writeHead(301)):t.writeHead(404),t.end()},e.prototype.static=function(e,t){return void 0===t&&(t={}),this.group("root",(function(r){return r.static(e,t)}))},e.prototype.requireBasicAuth=function(e){return this.group("root",(function(t){return t.requireBasicAuth(e)}))},e.prototype.createEdgeConfig=function(){return _.default(this)},e.prototype.createPreloadConfig=function(){return O.default.resolvePreloadConfig(this)},e.prototype.getDestinations=function(){return this.destinations},e.prototype.getRouteGroups=function(){return this.routeGroups},e.prototype.isRequestFromEdge=function(e){return"string"==typeof e.headers[y.HTTP_HEADERS.xXdnVersion]},e}();t.default=k},function(e,t,r){var n=r(35),o=r(36),i=r(20),s=r(1),a=r(7),u=r(21),c=r(18),l=r(23),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var r in e)if(f.call(e,r))return!1;return!0}},function(e,t,r){var n=r(52)(Object.keys,Object);e.exports=n},function(e,t,r){var n=r(5)(r(2),"DataView");e.exports=n},function(e,t,r){var n=r(37),o=r(100),i=r(3),s=r(54),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?p:a).test(s(e))}},function(e,t,r){var n=r(19),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[a]=r:delete e[a]),o}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n,o=r(101),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},function(e,t,r){var n=r(2)["__core-js_shared__"];e.exports=n},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(5)(r(2),"Promise");e.exports=n},function(e,t,r){var n=r(5)(r(2),"Set");e.exports=n},function(e,t,r){var n=r(5)(r(2),"WeakMap");e.exports=n},function(e,t,r){var n=r(6),o=r(4);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(6),o=r(39),i=r(4),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!s[n(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var n=r(53),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(this,r(22)(e))},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(113),o=r(40),i=r(165);e.exports=function(e,t){return e&&e.length?n(e,o(t,2),i):void 0}},function(e,t,r){var n=r(26);e.exports=function(e,t,r){for(var o=-1,i=e.length;++o<i;){var s=e[o],a=t(s);if(null!=a&&(void 0===u?a==a&&!n(a):r(a,u)))var u=a,c=s}return c}},function(e,t,r){var n=r(115),o=r(154),i=r(60);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},function(e,t,r){var n=r(41),o=r(56);e.exports=function(e,t,r,i){var s=r.length,a=s,u=!i;if(null==e)return!a;for(e=Object(e);s--;){var c=r[s];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<a;){var l=(c=r[s])[0],f=e[l],p=c[1];if(u&&c[2]){if(void 0===f&&!(l in e))return!1}else{var h=new n;if(i)var d=i(f,p,l,e,t,h);if(!(void 0===d?o(p,f,3,i,h):d))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(28),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},function(e,t,r){var n=r(28);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(28);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(28);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},function(e,t,r){var n=r(27);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(27),o=r(38),i=r(42);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!o||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(s)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var n=r(127),o=r(27),i=r(38);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(e,t,r){var n=r(128),o=r(129),i=r(130),s=r(131),a=r(132);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,e.exports=u},function(e,t,r){var n=r(29);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(29),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(29),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},function(e,t,r){var n=r(29);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,r){var n=r(30);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(30);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(30);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(30);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},function(e,t,r){var n=r(41),o=r(57),i=r(144),s=r(147),a=r(36),u=r(1),c=r(21),l=r(23),f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,h,d,v){var y=u(e),g=u(t),m=y?"[object Array]":a(e),b=g?"[object Array]":a(t),_=(m="[object Arguments]"==m?f:m)==f,x=(b="[object Arguments]"==b?f:b)==f,w=m==b;if(w&&c(e)){if(!c(t))return!1;y=!0,_=!1}if(w&&!_)return v||(v=new n),y||l(e)?o(e,t,r,h,d,v):i(e,t,m,r,h,d,v);if(!(1&r)){var E=_&&p.call(e,"__wrapped__"),R=x&&p.call(t,"__wrapped__");if(E||R){var S=E?e.value():e,C=R?t.value():t;return v||(v=new n),d(S,C,r,h,v)}}return!!w&&(v||(v=new n),s(e,t,r,h,d,v))}},function(e,t,r){var n=r(42),o=r(140),i=r(141);function s(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,e.exports=s},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,r){var n=r(19),o=r(58),i=r(10),s=r(57),a=r(145),u=r(146),c=n?n.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,f,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=a;case"[object Set]":var d=1&n;if(h||(h=u),e.size!=t.size&&!d)return!1;var v=p.get(e);if(v)return v==t;n|=2,p.set(e,t);var y=s(h(e),h(t),n,c,f,p);return p.delete(e),y;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},function(e,t,r){var n=r(148),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,i,s,a){var u=1&r,c=n(e),l=c.length;if(l!=n(t).length&&!u)return!1;for(var f=l;f--;){var p=c[f];if(!(u?p in t:o.call(t,p)))return!1}var h=a.get(e),d=a.get(t);if(h&&d)return h==t&&d==e;var v=!0;a.set(e,t),a.set(t,e);for(var y=u;++f<l;){var g=e[p=c[f]],m=t[p];if(i)var b=u?i(m,g,p,t,e,a):i(g,m,p,e,t,a);if(!(void 0===b?g===m||s(g,m,r,i,a):b)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return a.delete(e),a.delete(t),v}},function(e,t,r){var n=r(149),o=r(151),i=r(24);e.exports=function(e){return n(e,i,o)}},function(e,t,r){var n=r(150),o=r(1);e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t,r){var n=r(152),o=r(153),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),n(s(e),(function(t){return i.call(e,t)})))}:o;e.exports=a},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}},function(e,t){e.exports=function(){return[]}},function(e,t,r){var n=r(59),o=r(24);e.exports=function(e){for(var t=o(e),r=t.length;r--;){var i=t[r],s=e[i];t[r]=[i,s,n(s)]}return t}},function(e,t,r){var n=r(56),o=r(61),i=r(161),s=r(44),a=r(59),u=r(60),c=r(11);e.exports=function(e,t){return s(e)&&a(t)?u(c(e),t):function(r){var s=o(r,e);return void 0===s&&s===t?i(r,e):n(t,s,3)}}},function(e,t,r){var n=r(157),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)})),t}));e.exports=s},function(e,t,r){var n=r(158);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},function(e,t,r){var n=r(42);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(o.Cache||n),r}o.Cache=n,e.exports=o},function(e,t,r){var n=r(19),o=r(160),i=r(1),s=r(26),a=n?n.prototype:void 0,u=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(s(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},function(e,t,r){var n=r(162),o=r(64);e.exports=function(e,t){return null!=e&&o(e,t,n)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,r){var n=r(65),o=r(164),i=r(44),s=r(11);e.exports=function(e){return i(e)?n(s(e)):o(e)}},function(e,t,r){var n=r(62);e.exports=function(e){return function(t){return n(t,e)}}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,r){var n=r(35),o=r(36),i=r(7),s=r(66),a=r(167);e.exports=function(e){if(null==e)return 0;if(i(e))return s(e)?a(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:n(e).length}},function(e,t,r){var n=r(168),o=r(169),i=r(170);e.exports=function(e){return o(e)?i(e):n(e)}},function(e,t,r){var n=r(65)("length");e.exports=n},function(e,t){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return r.test(e)}},function(e,t){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+o+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[i,s,a].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[i+n+"?",n,s,a,r].join("|")+")",f=RegExp(o+"(?="+o+")|"+l+c,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(172));t.default=function(e){!function(e){e.match("/__xdn__/cache-manifest.js",(function(t){var r=t.cache,n=t.setResponseHeader,i=t.send,s=t.allowCors;r({edge:{maxAgeSeconds:31536e3},browser:{maxAgeSeconds:3600}}),n("content-type","text/javascript"),s(),i((function(){return"self.__XDN_CACHE_MANIFEST__="+o.default.fromRouter(e).toJSON()}))}))}(e);try{r(182)(e)}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(173)),u=s(r(70)),c=s(r(181)),l=r(74),f=function(){function e(e){this.entries=e||[]}return Object.defineProperty(e.prototype,"cacheableEntries",{get:function(){return this.entries.filter(e.isEntryCacheable)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaRoutes",{get:function(){return this.cacheableEntries.filter((function(e){var t=e.cacheOptions;return t.browser&&t.browser.spa})).map((function(e){var t=e.route;return new RegExp(t,"i")}))},enumerable:!0,configurable:!0}),e.prototype.shouldPrefetch=function(t){var r=!1;return this.entries.some((function(n){return!!e.entryMatches(n,t)&&((r=e.isEntryCacheable(n))||n.returnsResponse)})),r},e.entryMatches=function(e,t){return new RegExp(e.route,"i").test(t.pathname)&&u.default.matchCriteriaRegexObjectWithRequestObject(a.default(e.query||{},(function(e){return e?new RegExp(e,"i"):null})),c.default(Array.from(t.searchParams.entries())))&&(!e.protocol||new RegExp(e.protocol,"i").test(t.protocol))},e.isEntryCacheable=function(e){var t=e.cacheOptions;return!!(t.browser&&(t.browser.serviceWorkerSeconds||0)>0&&t.edge&&(t.edge.maxAgeSeconds||0)>0)},e.fromEntries=function(t){return new e(t)},e.fromRouter=function(t){var r,n,o=new e,s=function(e){if(void 0!==e)return e instanceof RegExp?e.source:e};try{for(var u=i(t.routeGroups.getRoutes()),c=u.next();!c.done;c=u.next()){var l=c.value,f=new p;l.handler(f);var h={criteriaPath:l.criteria.path,route:l.toRegexString(),method:s(l.criteria.method),protocol:s(l.criteria.protocol),cacheOptions:f.cacheOptions,returnsResponse:f.returnsResponse};l.criteria.query&&(h.query=a.default(l.criteria.query,(function(e){return e?e.source:null}))),o.entries.push(h)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return o},e.prototype.toJSON=function(){return JSON.stringify(this.entries)},e}();t.default=f;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cacheOptions={},t.returnsResponse=!1,t.cache=function(e){t.cacheOptions=e},t.send=function(){t.returnsResponse=!0},t.compute=function(){t.returnsResponse=!0},t.proxy=function(){t.returnsResponse=!0},t.redirect=function(){t.returnsResponse=!0},t.render=function(){t.returnsResponse=!0},t}return o(t,e),t}(l.BaseResponseWriter)},function(e,t,r){var n=r(31),o=r(68),i=r(40);e.exports=function(e,t){var r={};return t=i(t,3),o(e,(function(e,o,i){n(r,o,t(e,o,i))})),r}},function(e,t){e.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var u=s[e?a:++o];if(!1===r(i[u],u,i))break}return t}}},function(e,t,r){var n=r(176),o=r(177),i=r(40),s=r(1),a=r(71);e.exports=function(e,t,r){var u=s(e)?n:o;return r&&a(e,t,r)&&(t=void 0),u(e,i(t,3))}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},function(e,t,r){var n=r(178);e.exports=function(e,t){var r=!0;return n(e,(function(e,n,o){return r=!!t(e,n,o)})),r}},function(e,t,r){var n=r(68),o=r(179)(n);e.exports=o},function(e,t,r){var n=r(7);e.exports=function(e,t){return function(r,o){if(null==r)return r;if(!n(r))return e(r,o);for(var i=r.length,s=t?i:-1,a=Object(r);(t?s--:++s<i)&&!1!==o(a[s],s,a););return r}}},function(e,t,r){var n=r(63);e.exports=function(e){return n(e).toLowerCase()}},function(e,t){e.exports=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n}},function(e,t,r){const n=r(8),o={edge:{maxAgeSeconds:31536e4},browser:!1};function i(){return process.env.XDN_DEVTOOLS_ENABLED?"true"===process.env.XDN_DEVTOOLS_ENABLED:process.env.PREVIEW_XDN_DEVTOOLS_ENABLED?"true"===process.env.PREVIEW_XDN_DEVTOOLS_ENABLED:null}e.exports=function(e){null!==i()&&e.match("/(.*)",({addResponseCookie:e})=>{e("xdn-devtools-env-enabled",i()+"; Path=/")}),e.get("/__xdn__/devtools/enable",({redirect:e,addResponseCookie:t})=>{t("xdn-devtools-enabled","true; Path=/"),e("/")}).get("/__xdn__/devtools/disable",({redirect:e,addResponseCookie:t})=>{t("xdn-devtools-enabled","false; Path=/"),e("/")}).match("/__xdn__/devtools/:path*",({cache:e,serveStatic:t})=>{e(o),t(n.join("node_modules","@xdn","devtools","widget",":path*"))})}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=new Set(["setRequestHeader","updateRequestHeader","removeRequestHeader","setResponseHeader","updateResponseHeader","removeResponseHeader","setUpstreamResponseHeader","updateUpstreamResponseHeader","removeUpstreamResponseHeader","addResponseCookie","updateResponseCookie","removeResponseCookie","addUpstreamResponseCookie","updateUpstreamResponseCookie","removeUpstreamResponseCookie"]);t.default={create:function(e){return new Proxy(e,{get:function(e,t){return a.has(t.toString())?function(e,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e.runningImmediately?[4,e[t].apply(e,s(r))]:[2];case 1:return[2,n.sent()]}}))}))}.bind(e)}(e,t):e[t]}})}}},function(e,t,r){var n=r(185);e.exports=function(e,t,r){return null==e?e:n(e,t,r)}},function(e,t,r){var n=r(75),o=r(43),i=r(25),s=r(3),a=r(11);e.exports=function(e,t,r,u){if(!s(e))return e;for(var c=-1,l=(t=o(t,e)).length,f=l-1,p=e;null!=p&&++c<l;){var h=a(t[c]),d=r;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(c!=f){var v=p[h];void 0===(d=u?u(v,h,p):void 0)&&(d=s(v)?v:i(t[c+1])?[]:{})}n(p,h,d),p=p[h]}return e}},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&r.call(e,t)}},function(e,t,r){var n=r(188),o=r(202)((function(e,t,r){n(e,t,r)}));e.exports=o},function(e,t,r){var n=r(41),o=r(77),i=r(69),s=r(189),a=r(3),u=r(80),c=r(79);e.exports=function e(t,r,l,f,p){t!==r&&i(r,(function(i,u){if(p||(p=new n),a(i))s(t,r,u,l,e,f,p);else{var h=f?f(c(t,u),i,u+"",t,r,p):void 0;void 0===h&&(h=i),o(t,u,h)}}),u)}},function(e,t,r){var n=r(77),o=r(190),i=r(191),s=r(193),a=r(194),u=r(20),c=r(1),l=r(196),f=r(21),p=r(37),h=r(3),d=r(197),v=r(23),y=r(79),g=r(198);e.exports=function(e,t,r,m,b,_,x){var w=y(e,r),E=y(t,r),R=x.get(E);if(R)n(e,r,R);else{var S=_?_(w,E,r+"",e,t,x):void 0,C=void 0===S;if(C){var A=c(E),O=!A&&f(E),T=!A&&!O&&v(E);S=E,A||O||T?c(w)?S=w:l(w)?S=s(w):O?(C=!1,S=o(E,!0)):T?(C=!1,S=i(E,!0)):S=[]:d(E)||u(E)?(S=w,u(w)?S=g(w):h(w)&&!p(w)||(S=a(E))):C=!1}C&&(x.set(E,S),b(S,E,m,_,x),x.delete(E)),n(e,r,S)}}},function(e,t,r){(function(e){var n=r(2),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(22)(e))},function(e,t,r){var n=r(192);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t,r){var n=r(58);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){var n=r(195),o=r(78),i=r(18);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:n(o(e))}},function(e,t,r){var n=r(3),o=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=i},function(e,t,r){var n=r(7),o=r(4);e.exports=function(e){return o(e)&&n(e)}},function(e,t,r){var n=r(6),o=r(78),i=r(4),s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,l=u.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==l}},function(e,t,r){var n=r(199),o=r(80);e.exports=function(e){return n(e,o(e))}},function(e,t,r){var n=r(75),o=r(31);e.exports=function(e,t,r,i){var s=!r;r||(r={});for(var a=-1,u=t.length;++a<u;){var c=t[a],l=i?i(r[c],e[c],c,r,e):void 0;void 0===l&&(l=e[c]),s?o(r,c,l):n(r,c,l)}return r}},function(e,t,r){var n=r(3),o=r(18),i=r(201),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=o(e),r=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&r.push(a);return r}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){var n=r(203),o=r(71);e.exports=function(e){return n((function(t,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,a&&o(r[0],r[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++n<i;){var u=r[n];u&&e(t,u,n,s)}return t}))}},function(e,t,r){var n=r(12),o=r(204),i=r(206);e.exports=function(e,t){return i(o(e,t,n),e+"")}},function(e,t,r){var n=r(205),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=o(i.length-t,0),u=Array(a);++s<a;)u[s]=i[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=i[s];return c[t]=r(u),n(e,this,c)}}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var n=r(207),o=r(209)(n);e.exports=o},function(e,t,r){var n=r(208),o=r(67),i=r(12),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=s},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var r=Date.now;e.exports=function(e){var t=0,n=0;return function(){var o=r(),i=16-(o-n);if(n=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(r(76)),a=r(48),u=r(0),c=r(33),l=i(r(14)),f={$id:"/domainOrIpSchema",type:"string"},p={$id:"/backendObjectSchema",type:"object",properties:{domainOrIp:{$ref:f.$id},port:{type:"number",minimum:1,maximum:65535},hostHeader:{type:"string"},disableCheckCert:{type:"boolean"},firstByteTimeout:{type:"number"},basePath:{type:"string"}},additionalProperties:!1,required:["domainOrIp"]},h={$id:"/backendSchema",type:"object",patternProperties:{"^.*$":{oneOf:[{$ref:f.$id},{$ref:p.$id}]}}},d={$id:"/xdnFileConfigurationSchema",type:"object",properties:{prerenderConcurrency:{type:"number"},production:{type:"boolean"},routes:{type:"string"},server:{type:"object",required:["path"],properties:{path:{type:"string"},export:{type:"string"}}},includeFiles:{type:"object"},backends:{$ref:h.$id},includeNodeModules:{type:"boolean"}},additionalProperties:!1,required:[]},v=function(){function e(){}return e.validateXdnFileConfiguration=function(e){if(c.isCloud())return e;var t=[],r=new(l.default("ajv"))({allErrors:!0,schemas:[d,h,p,f]}).getSchema(d.$id);if(s.default(e,"backends.moov")&&t.push({message:"is a reserved backend name",dataPath:".backends['moov']"}),s.default(e,"backends."+u.BACKENDS.static)&&t.push({message:"is a reserved backend name",dataPath:".backends."+u.BACKENDS.static}),s.default(e,"backends."+u.BACKENDS.js)&&t.push({message:"is a reserved backend name",dataPath:".backends."+u.BACKENDS.js}),!r(e)&&r.errors&&(t=o(t,r.errors)),t.length){var n=t.map((function(e,t){var r=t+1+") config"+e.dataPath+": "+e.message;return"additionalProperties"===e.keyword&&(r+=" '"+e.params.additionalProperty+"'"),r})).join(a.EOL);throw new Error("XDN configuration validation failed with errors: "+a.EOL+n)}return e},e}();t.default=v},function(e,t,r){"use strict";e.exports=e=>{const t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(32),i=r(8),s=r(0),a=r(213),u=n(r(14));t.default=function(e){var t=e;t||(t={path:a.pathForBackend(s.BACKENDS.js)});var r=i.join(process.cwd(),t.path);if(o.existsSync(r)){var n=u.default(r);return t.export?n=n[t.export]():n.default&&(n=n.default),n}if(e)throw new Error("Server not found at "+e.path+". Please check the server.path property of xdn.config.js.")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);t.XDN_DIR=".xdn",t.JS_DIR=n.join(t.XDN_DIR,"lambda"),t.ASSETS_DIR=n.join(t.XDN_DIR,"s3"),t.SOURCES_DIR=n.join(t.XDN_DIR,"src"),t.ROUTES_FILE_NAME="routes.js",t.pathForBackend=function(e){return n.join("__backends__",e+".js")}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(r(81)),c=a(r(13)),l=a(r(47)),f=a(r(223)),p=a(r(224)),h=r(0),d=a(r(89));function v(e,t){var r,o,i=e.edgeConfig;return i.cache&&(null===(r=i.cache)||void 0===r?void 0:r.maxAgeSeconds)&&(null===(o=i.cache)||void 0===o?void 0:o.maxAgeSeconds)>0&&t?n(n({},i.cache),{matchExplicitMethod:t}):i.cache}function y(e){return e.edgeConfig.route}function g(e){return e.edgeConfig.transform}function m(e){return o(this,void 0,void 0,(function(){var t,r,n,a,c=this;return i(this,(function(m){switch(m.label){case 0:return t=[],n={index:e.index},[4,Promise.all(e.getRouteGroups().getRoutes().map((function(e){return o(c,void 0,void 0,(function(){var r,n,o,a,u,c;return i(this,(function(i){switch(i.label){case 0:r=new p.default({url:"",headers:{}},{},e,new d.default),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.handler(r)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),Error.captureStackTrace(n),t.push({route:e.toString(),stackTrace:n.stack}),[3,4];case 4:return o=function(e){var t,r,n=[];if(e.criteria.protocol){var o=void 0;if(!(o="string"==typeof e.criteria.protocol?new RegExp("^"+e.criteria.protocol+"$","i"):new RegExp(e.criteria.protocol)).test("http")&&!o.test("https"))throw new Error('Protocol matcher must match either "http" or "https"');t=o.source}if(e.criteria.path&&n.push({value:"${path}",matchRegex:e.toEdgeRegexString()}),e.criteria.method){var i=void 0;"string"!=typeof e.criteria.method?i=e.criteria.method:(i=f.default(e.criteria.method),Object.values(h.HTTP_METHODS).includes(e.criteria.method)&&(r=e.criteria.method)),n.push({value:"${method}",matchRegex:l.default(i)})}return e.criteria.headers&&Object.entries(e.criteria.headers).forEach((function(e){var t=s(e,2),r=t[0],o=t[1];n.push({value:"${req:"+r+"}",matchRegex:null===o?null:l.default(o)})})),e.criteria.query&&Object.entries(e.criteria.query).forEach((function(e){var t=s(e,2),r=t[0],o=t[1];n.push({value:"${query:"+r+"}",matchRegex:null===o?null:l.default(o)})})),e.criteria.cookies&&Object.entries(e.criteria.cookies).forEach((function(e){var t=s(e,2),r=t[0],o=t[1];n.push({value:"${req:cookie:"+r+"}",matchRegex:null===o?null:l.default(o)})})),{match:n,matchExplicitMethod:r,matchProtocolJavaScriptRegExpSource:t}}(e),a=o.match,u=o.matchExplicitMethod,c=o.matchProtocolJavaScriptRegExpSource,[2,{path:e.criteria.path,routeJson:e.toJson(),match:a,matchProtocolJavaScriptRegExpSource:c,cache:v(r,u),route:y(r),transform:g(r)}]}}))}))})))];case 1:if(n.routes=m.sent(),r=n,t.length)throw a=u.default.bold.red("\nErrors occurred while attempting to deploy your application to the XDN edge.")+u.default.red("\nThe following "+(t.length>1?"routes":"route")+" could not be processed:"),t.forEach((function(e){var t=e.route,r=e.stackTrace;a=a.concat("\n"+u.default.red("*")+" "+u.default.bold(t)+": "+r)})),new Error(a);return[2,r]}}))}))}t.default=function(e){return o(this,void 0,void 0,(function(){var t,o,s,a,u,l,f,p;return i(this,(function(i){switch(i.label){case 0:return t={},Object.keys(e.getDestinations()).length?[3,2]:(o={},[4,m(e)]);case 1:return o.default=i.sent(),t=o,[3,6];case 2:for(a in s=[],e.getDestinations())s.push(a);u=0,i.label=3;case 3:return u<s.length?(l=s[u],f=t,p=l,[4,m(e.getDestinations()[l])]):[3,6];case 4:f[p]=i.sent(),i.label=5;case 5:return u++,[3,3];case 6:return[2,{version:r(257).version,backends:n({},c.default.get("backends")),destinations:t}]}}))}))}},function(e,t,r){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}},function(e,t,r){"use strict";(function(e){const t=r(217),n=(e,r)=>function(){const n=e.apply(t,arguments);return`[${n+r}m`},o=(e,r)=>function(){const n=e.apply(t,arguments);return`[${38+r};5;${n}m`},i=(e,r)=>function(){const n=e.apply(t,arguments);return`[${38+r};2;${n[0]};${n[1]};${n[2]}m`};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,r={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};r.color.grey=r.color.gray;for(const t of Object.keys(r)){const n=r[t];for(const t of Object.keys(n)){const o=n[t];r[t]={open:`[${o[0]}m`,close:`[${o[1]}m`},n[t]=r[t],e.set(o[0],o[1])}Object.defineProperty(r,t,{value:n,enumerable:!1}),Object.defineProperty(r,"codes",{value:e,enumerable:!1})}const s=e=>e,a=(e,t,r)=>[e,t,r];r.color.close="[39m",r.bgColor.close="[49m",r.color.ansi={ansi:n(s,0)},r.color.ansi256={ansi256:o(s,0)},r.color.ansi16m={rgb:i(a,0)},r.bgColor.ansi={ansi:n(s,10)},r.bgColor.ansi256={ansi256:o(s,10)},r.bgColor.ansi16m={rgb:i(a,10)};for(let e of Object.keys(t)){if("object"!=typeof t[e])continue;const s=t[e];"ansi16"===e&&(e="ansi"),"ansi16"in s&&(r.color.ansi[e]=n(s.ansi16,0),r.bgColor.ansi[e]=n(s.ansi16,10)),"ansi256"in s&&(r.color.ansi256[e]=o(s.ansi256,0),r.bgColor.ansi256[e]=o(s.ansi256,10)),"rgb"in s&&(r.color.ansi16m[e]=i(s.rgb,0),r.bgColor.ansi16m[e]=i(s.rgb,10))}return r}})}).call(this,r(22)(e))},function(e,t,r){var n=r(82),o=r(219),i={};Object.keys(n).forEach((function(e){i[e]={},Object.defineProperty(i[e],"channels",{value:n[e].channels}),Object.defineProperty(i[e],"labels",{value:n[e].labels});var t=o(e);Object.keys(t).forEach((function(r){var n=t[r];i[e][r]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=e(t);if("object"==typeof r)for(var n=r.length,o=0;o<n;o++)r[o]=Math.round(r[o]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(n),i[e][r].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)}))})),e.exports=i},function(e,t,r){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,r){var n=r(82);function o(e){var t=function(){for(var e={},t=Object.keys(n),r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var o=r.pop(),i=Object.keys(n[o]),s=i.length,a=0;a<s;a++){var u=i[a],c=t[u];-1===c.distance&&(c.distance=t[o].distance+1,c.parent=o,r.unshift(u))}return t}function i(e,t){return function(r){return t(e(r))}}function s(e,t){for(var r=[t[e].parent,e],o=n[t[e].parent][e],s=t[e].parent;t[s].parent;)r.unshift(t[s].parent),o=i(n[t[s].parent][s],o),s=t[s].parent;return o.conversion=r,o}e.exports=function(e){for(var t=o(e),r={},n=Object.keys(t),i=n.length,a=0;a<i;a++){var u=n[a];null!==t[u].parent&&(r[u]=s(u,t))}return r}},function(e,t,r){"use strict";const n=r(48),o=r(221),i=process.env;let s;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===s)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in i)||"codeship"===i.CI_NAME?1:t;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){const e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:(i.TERM,t)}(e))}o("no-color")||o("no-colors")||o("color=false")?s=!1:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(s=!0),"FORCE_COLOR"in i&&(s=0===i.FORCE_COLOR.length||0!==parseInt(i.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,r){"use strict";e.exports=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),o=t.indexOf("--");return-1!==n&&(-1===o||n<o)}},function(e,t,r){"use strict";const n=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,o=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,i=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function u(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):a.get(e)||e}function c(e,t){const r=[],n=t.trim().split(/\s*,\s*/g);let o;for(const t of n)if(isNaN(t)){if(!(o=t.match(i)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);r.push(o[2].replace(s,(e,t,r)=>t?u(t):r))}else r.push(Number(t));return r}function l(e){o.lastIndex=0;const t=[];let r;for(;null!==(r=o.exec(e));){const e=r[1];if(r[2]){const n=c(e,r[2]);t.push([e].concat(n))}else t.push([e])}return t}function f(e,t){const r={};for(const e of t)for(const t of e.styles)r[t[0]]=e.inverse?null:t.slice(1);let n=e;for(const e of Object.keys(r))if(Array.isArray(r[e])){if(!(e in n))throw new Error("Unknown Chalk style: "+e);n=r[e].length>0?n[e].apply(n,r[e]):n[e]}return n}e.exports=(e,t)=>{const r=[],o=[];let i=[];if(t.replace(n,(t,n,s,a,c,p)=>{if(n)i.push(u(n));else if(a){const t=i.join("");i=[],o.push(0===r.length?t:f(e,r)(t)),r.push({inverse:s,styles:l(a)})}else if(c){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");o.push(f(e,r)(i.join(""))),i=[],r.pop()}else i.push(p)}),o.push(i.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return o.join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new RegExp("^"+e+"$","i")}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(r(225)),a=i(r(226)),u=r(0),c=i(r(49)),l=i(r(47)),f=r(85),p=function(e){function t(t,r,n,o){var i=e.call(this,t,r,n,o)||this;return i.stream=function(){},i.setRequestHeader=function(e,t){f.validateSetRequestHeader(e),i.edgeConfig.transform.request.push({action:u.ACTIONS.setHeader,name:e,value:t})},i.updateRequestHeader=function(e,t,r){f.validateUpdateRequestHeader(e),i.edgeConfig.transform.request.push({action:u.ACTIONS.updateHeader,name:e,valueRegex:t.source,replaceValue:r})},i.removeRequestHeader=function(e){f.validateRemoveRequestHeader(e),i.edgeConfig.transform.request.push({action:u.ACTIONS.removeHeader,name:e})},i.setResponseHeader=function(e,t){f.validateSetResponseHeader(e),i.edgeConfig.transform.response.push({action:u.ACTIONS.setHeader,name:e,value:t})},i.updateResponseHeader=function(e,t,r){f.validateUpdateResponseHeader(e),i.edgeConfig.transform.response.push({action:u.ACTIONS.updateHeader,name:e,valueRegex:t.source,replaceValue:r})},i.removeResponseHeader=function(e){f.validateRemoveResponseHeader(e),i.edgeConfig.transform.response.push({action:u.ACTIONS.removeHeader,name:e})},i.setUpstreamResponseHeader=function(e,t){f.validateSetResponseHeader(e),i.edgeConfig.transform.upstreamResponse.push({action:u.ACTIONS.setHeader,name:e,value:t})},i.updateUpstreamResponseHeader=function(e,t,r){f.validateUpdateResponseHeader(e),i.edgeConfig.transform.upstreamResponse.push({action:u.ACTIONS.updateHeader,name:e,valueRegex:t.source,replaceValue:r})},i.removeUpstreamResponseHeader=function(e){f.validateRemoveResponseHeader(e),i.edgeConfig.transform.upstreamResponse.push({action:u.ACTIONS.removeHeader,name:e})},i.addResponseCookie=function(e,t){i.edgeConfig.transform.response.push({action:u.ACTIONS.addCookie,name:e,value:t})},i.updateResponseCookie=function(e,t,r){i.edgeConfig.transform.response.push({action:u.ACTIONS.updateCookie,name:e,valueRegex:t.source,replaceValue:r})},i.removeResponseCookie=function(e){i.edgeConfig.transform.response.push({action:u.ACTIONS.removeCookie,name:e})},i.addUpstreamResponseCookie=function(e,t){i.edgeConfig.transform.upstreamResponse.push({action:u.ACTIONS.addCookie,name:e,value:t})},i.updateUpstreamResponseCookie=function(e,t,r){i.edgeConfig.transform.upstreamResponse.push({action:u.ACTIONS.updateCookie,name:e,valueRegex:t.source,replaceValue:r})},i.removeUpstreamResponseCookie=function(e){i.edgeConfig.transform.upstreamResponse.push({action:u.ACTIONS.removeCookie,name:e})},i.redirect=function(e,t){void 0===t&&(t=302),i.setEdgeRoute({action:u.ACTIONS.syntheticRes,statusCode:t}),i.edgeConfig.transform.response.push({action:u.ACTIONS.setHeader,name:u.HTTP_HEADERS.location,value:"${url}"},{action:u.ACTIONS.updateHeader,name:u.HTTP_HEADERS.location,valueRegex:i.route.toEdgeRegexString(),replaceValue:s.default(i.route.criteria.path,e)})},i.serveStatic=function(e){return e&&!e.startsWith("/")&&(e="/"+e),i.proxy(u.BACKENDS.static,{path:e}),i.removePathTrailingSlash(),Promise.resolve()},i.proxy=function(e,t){var r=void 0===t?{}:t,n=r.path,o=r.transformResponse,s=r.transformRequest;return a.default(e),null==o&&null==s&&"function"!=typeof n||(e=u.BACKENDS.js),i.setEdgeRoute({action:u.ACTIONS.proxy,backend:e,fsPath:"string"==typeof n?n:void 0}),"string"==typeof n&&i.updatePath(n),Promise.resolve()},i.updatePath=function(e){i.edgeConfig.transform.request.push({action:u.ACTIONS.updatePath,valueRegex:i.route.toEdgeRegexString(),replaceValue:s.default(i.route.criteria.path,e)})},i.removePathTrailingSlash=function(){i.edgeConfig.transform.request.push({action:u.ACTIONS.updatePath,valueRegex:l.default(/\/$/),replaceValue:""})},i.cache=function(e){var t=e.edge,r=e.browser,n=e.key;if(t){var o=t.maxAgeSeconds,s=t.staleWhileRevalidateSeconds,a=t.forcePrivateCaching;i.edgeConfig.cache={maxAgeSeconds:o,staleWhileRevalidateSeconds:s,forcePrivateCaching:a},n&&(i.edgeConfig.cache.customKey=n.toJSON())}else!1===t&&(i.edgeConfig.cache={disabled:!0});if(r||!1===r){var c=r||{maxAgeSeconds:0},l=(o=c.maxAgeSeconds,c.serviceWorkerSeconds);0===o?i.edgeConfig.transform.response.push({action:u.ACTIONS.setHeader,name:u.HTTP_HEADERS.cacheControl,value:"private, no-store, no-cache"}):o&&i.edgeConfig.transform.response.push({action:u.ACTIONS.setHeader,name:u.HTTP_HEADERS.cacheControl,value:"private, max-age="+o}),l&&i.edgeConfig.transform.response.push({action:u.ACTIONS.setHeader,name:u.HTTP_HEADERS.xSwCacheControl,value:"max-age="+l})}},i.send=function(e,t,r){void 0===t&&(t=200),"function"==typeof e?i.render():i.setEdgeRoute({action:u.ACTIONS.syntheticRes,statusCode:t,statusMessage:r,content:e})},i.compute=function(e){i.setEdgeRoute({action:u.ACTIONS.proxy,backend:u.BACKENDS.js})},i.render=function(){return i.setEdgeRoute({action:u.ACTIONS.proxy,backend:u.BACKENDS.js}),Promise.resolve()},i.edgeConfig={transform:{request:[],upstreamResponse:[],response:[]}},i}return o(t,e),t.prototype.setEdgeRoute=function(e){this.edgeConfig.route=e,this.edgeConfig.transform.upstreamResponse.push({action:u.ACTIONS.setHeader,name:u.HTTP_HEADERS.vary,value:u.HTTP_HEADERS.acceptEncoding})},t}(c.default);t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(46);t.default=function(e,t){var r={};if(null==e)return t;var o=1;n.parse(e).forEach((function(e){"string"!=typeof e&&(r[e.name]=o++)}));var i=new URL(t,"http://__"),s=n.parse(i.pathname).map((function(e,t){return"string"==typeof e?e:"/\\"+r[e.name]})).join("");return"__"===i.hostname?s+i.search:i.protocol+"//"+i.host+s+i.search}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(48),i=r(0),s=n(r(13));t.default=function(e){if(!Object.values(i.BACKENDS).includes(e)&&!s.default.get("backends."+e,!1)){var t=Object.keys(s.default.get("backends"));throw t&&t.length?new Error('To fix this problem use one of the "backends" configured in xdn.config.js:'+o.EOL+o.EOL+" - "+t.join(o.EOL+" - ")+o.EOL+o.EOL+'or add "'+e+'" to the "backends" property in xdn.config.js.'):new Error('Add "'+e+'" to the "backends" property in xdn.config.js.')}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e;if(/(^|[^$]){/.test(e))throw new Error("{variable} syntax in the path option is no longer supported, use :variable instead ("+e+")");for(var n in t){var o=t[n];Array.isArray(o)&&(o=o.join("/")),r=r.replace(new RegExp(":"+n+"(\\?|\\*|\\(.*\\))?","g"),o)}return r=r.replace(/:\w+(\*|\?)?/,"")}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(15),c=a(r(16)),l=a(r(17)),f=r(8),p=a(r(229)),h=["transfer-encoding","content-length"],d=function(){function e(e){this.config=e}return e.prototype.fetch=function(e,t,r){return o(this,void 0,void 0,(function(){var n,o,a,u,f;return i(this,(function(i){return o=(n=r||{}).path,a=n.headers,u=this.getProxyTarget(e,o),f=this.getProxyRequestOptions(u,e,a),[2,new Promise((function(r,n){var o=("https:"===u.protocol?c.default:l.default).request(f,(function(e){var n=[];e.on("data",(function(e){return n.push(e)})).on("end",(function(){Object.entries(e.headers).filter((function(e){var t=s(e,1)[0];return!h.includes(t.toLowerCase())})).forEach((function(e){var r=s(e,2),n=r[0],o=r[1];try{t.setHeader(n,o)}catch(e){console.warn("Could not relay upstream response header "+n+" with value "+o,e)}})),t.statusCode=e.statusCode,t.statusMessage=e.statusMessage,t.body=Buffer.concat(n),r()}))}));o.on("error",(function(e){return n(new p.default(e))})),o.end(e.body)}))]}))}))},e.prototype.getProxyTarget=function(e,t){var r=t||e.url,n=this.config,o=n.domainOrIp,i=n.basePath,s=n.port;if(i&&(r=f.join(i,r)),o){var a=o.match(/^127.0.0.1(:\d+)?$/)?"http":"https",c=o+(s?":"+s:"");r=a+"://"+f.join(c,r)}return u.parse(r,!0)},e.prototype.getProxyRequestOptions=function(e,t,r){var o=null;return this.config.disableCheckCert&&"https:"===e.protocol&&(o=new c.default.Agent({rejectUnauthorized:!1})),n(n({},e),{method:t.method,timeout:this.config.firstByteTimeout||0,agent:o,headers:n(n(n({},t.headers),r),{host:this.config.hostHeader||t.headers.host})})},e}();t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this,t.message)||this;return r.type="BackendFetchError",r.cause=t,r}return o(t,e),t}(Error);t.default=i},function(e,t){e.exports=require("querystring")},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(232)).default.createProxyServer({changeOrigin:!0});t.default=function(e,t,r,n){var i={target:{protocol:"127.0.0.1"===r.domainOrIp?"http":"https",host:r.domainOrIp,port:r.port}};o.web(e,t,i,n||Function.prototype)}},function(e,t,r){
/*!
 * Caron dimonio, con occhi di bragia
 * loro accennando, tutte le raccoglie;
 * batte col remo qualunque s’adagia 
 *
 * Charon the demon, with the eyes of glede,
 * Beckoning to them, collects them all together,
 * Beats with his oar whoever lags behind
 *          
 *          Dante - The Divine Comedy (Canto III)
 */
e.exports=r(233)},function(e,t,r){var n=r(234).Server;function o(e){return new n(e)}n.createProxyServer=o,n.createServer=o,n.createProxy=o,e.exports=n},function(e,t,r){var n=e.exports,o=r(34)._extend,i=r(15).parse,s=r(235),a=r(17),u=r(16),c=r(236),l=r(249);function f(e){return function(t){return function(r,n){var s,a,u="ws"===e?this.wsPasses:this.webPasses,c=[].slice.call(arguments),l=c.length-1;"function"==typeof c[l]&&(a=c[l],l--);var f=t;if(c[l]instanceof Buffer||c[l]===n||(f=o({},t),o(f,c[l]),l--),c[l]instanceof Buffer&&(s=c[l]),["target","forward"].forEach((function(e){"string"==typeof f[e]&&(f[e]=i(f[e]))})),!f.target&&!f.forward)return this.emit("error",new Error("Must provide a proper URL as target"));for(var p=0;p<u.length&&!u[p](r,n,f,s,this,a);p++);}}}function p(e){s.call(this),(e=e||{}).prependPath=!1!==e.prependPath,this.web=this.proxyRequest=f("web")(e),this.ws=this.proxyWebsocketRequest=f("ws")(e),this.options=e,this.webPasses=Object.keys(c).map((function(e){return c[e]})),this.wsPasses=Object.keys(l).map((function(e){return l[e]})),this.on("error",this.onError,this)}n.Server=p,n.createRightProxy=f,r(34).inherits(p,s),p.prototype.onError=function(e){if(1===this.listeners("error").length)throw e},p.prototype.listen=function(e,t){var r=this,n=function(e,t){r.web(e,t)};return this._server=this.options.ssl?u.createServer(this.options.ssl,n):a.createServer(n),this.options.ws&&this._server.on("upgrade",(function(e,t,n){r.ws(e,t,n)})),this._server.listen(e,t),this},p.prototype.close=function(e){var t=this;this._server&&this._server.close((function(){t._server=null,e&&e.apply(null,arguments)}))},p.prototype.before=function(e,t,r){if("ws"!==e&&"web"!==e)throw new Error("type must be `web` or `ws`");var n="ws"===e?this.wsPasses:this.webPasses,o=!1;if(n.forEach((function(e,r){e.name===t&&(o=r)})),!1===o)throw new Error("No such pass");n.splice(o,0,r)},p.prototype.after=function(e,t,r){if("ws"!==e&&"web"!==e)throw new Error("type must be `web` or `ws`");var n="ws"===e?this.wsPasses:this.webPasses,o=!1;if(n.forEach((function(e,r){e.name===t&&(o=r)})),!1===o)throw new Error("No such pass");n.splice(o++,0,r)}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function i(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||e,i),u=o?o+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},c.prototype.listeners=function(e){var t=o?o+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,s=new Array(i);n<i;n++)s[n]=r[n].fn;return s},c.prototype.listenerCount=function(e){var t=o?o+e:e,r=this._events[t];return r?r.fn?1:r.length:0},c.prototype.emit=function(e,t,r,n,i,s){var a=o?o+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,i),!0;case 6:return l.fn.call(l.context,t,r,n,i,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,n);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},c.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},c.prototype.removeListener=function(e,t,r,n){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return u(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||n&&!s.once||r&&s.context!==r||u(this,i);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==t||n&&!s[a].once||r&&s[a].context!==r)&&c.push(s[a]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,e.exports=c},function(e,t,r){var n=r(17),o=r(16),i=r(237),s=r(50),a=r(239);i=Object.keys(i).map((function(e){return i[e]}));var u={http:n,https:o};
/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, res, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */e.exports={deleteLength:function(e,t,r){"DELETE"!==e.method&&"OPTIONS"!==e.method||e.headers["content-length"]||(e.headers["content-length"]="0",delete e.headers["transfer-encoding"])},timeout:function(e,t,r){r.timeout&&e.socket.setTimeout(r.timeout)},XHeaders:function(e,t,r){if(r.xfwd){var n=e.isSpdy||s.hasEncryptedConnection(e),o={for:e.connection.remoteAddress||e.socket.remoteAddress,port:s.getPort(e),proto:n?"https":"http"};["for","port","proto"].forEach((function(t){e.headers["x-forwarded-"+t]=(e.headers["x-forwarded-"+t]||"")+(e.headers["x-forwarded-"+t]?",":"")+o[t]})),e.headers["x-forwarded-host"]=e.headers["x-forwarded-host"]||e.headers.host||""}},stream:function(e,t,r,n,o,c){o.emit("start",e,t,r.target||r.forward);var l=r.followRedirects?a:u,f=l.http,p=l.https;if(r.forward){var h=("https:"===r.forward.protocol?p:f).request(s.setupOutgoing(r.ssl||{},r,e,"forward")),d=g(h,r.forward);if(e.on("error",d),h.on("error",d),(r.buffer||e).pipe(h),!r.target)return t.end()}var v=("https:"===r.target.protocol?p:f).request(s.setupOutgoing(r.ssl||{},r,e));v.on("socket",(function(n){o&&!v.getHeader("expect")&&o.emit("proxyReq",v,e,t,r)})),r.proxyTimeout&&v.setTimeout(r.proxyTimeout,(function(){v.abort()})),e.on("aborted",(function(){v.abort()}));var y=g(v,r.target);function g(r,n){return function(i){if(e.socket.destroyed&&"ECONNRESET"===i.code)return o.emit("econnreset",i,e,t,n),r.abort();c?c(i,e,t,n):o.emit("error",i,e,t,n)}}e.on("error",y),v.on("error",y),(r.buffer||e).pipe(v),v.on("response",(function(n){if(o&&o.emit("proxyRes",n,e,t),!t.headersSent&&!r.selfHandleResponse)for(var s=0;s<i.length&&!i[s](e,t,n,r);s++);t.finished?o&&o.emit("end",e,t,n):(n.on("end",(function(){o&&o.emit("end",e,t,n)})),r.selfHandleResponse||n.pipe(t))}))}}},function(e,t,r){var n=r(15),o=r(50),i=/^201|30(1|2|7|8)$/;
/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, res, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */
e.exports={removeChunked:function(e,t,r){"1.0"===e.httpVersion&&delete r.headers["transfer-encoding"]},setConnection:function(e,t,r){"1.0"===e.httpVersion?r.headers.connection=e.headers.connection||"close":"2.0"===e.httpVersion||r.headers.connection||(r.headers.connection=e.headers.connection||"keep-alive")},setRedirectHostRewrite:function(e,t,r,o){if((o.hostRewrite||o.autoRewrite||o.protocolRewrite)&&r.headers.location&&i.test(r.statusCode)){var s=n.parse(o.target),a=n.parse(r.headers.location);if(s.host!=a.host)return;o.hostRewrite?a.host=o.hostRewrite:o.autoRewrite&&(a.host=e.headers.host),o.protocolRewrite&&(a.protocol=o.protocolRewrite),r.headers.location=a.format()}},writeHeaders:function(e,t,r,n){var i,s=n.cookieDomainRewrite,a=n.cookiePathRewrite,u=n.preserveHeaderKeyCase;if("string"==typeof s&&(s={"*":s}),"string"==typeof a&&(a={"*":a}),u&&null!=r.rawHeaders){i={};for(var c=0;c<r.rawHeaders.length;c+=2){var l=r.rawHeaders[c];i[l.toLowerCase()]=l}}Object.keys(r.headers).forEach((function(e){var n=r.headers[e];u&&i&&(e=i[e]||e),function(e,r){null!=r&&(s&&"set-cookie"===e.toLowerCase()&&(r=o.rewriteCookieProperty(r,s,"domain")),a&&"set-cookie"===e.toLowerCase()&&(r=o.rewriteCookieProperty(r,a,"path")),t.setHeader(String(e).trim(),r))}(e,n)}))},writeStatusCode:function(e,t,r){r.statusMessage?(t.statusCode=r.statusCode,t.statusMessage=r.statusMessage):t.statusCode=r.statusCode}}},function(e,t,r){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,r){var n=r(15),o=n.URL,i=r(17),s=r(16),a=r(240).Writable,u=r(241),c=r(242),l=Object.create(null);["abort","aborted","connect","error","socket","timeout"].forEach((function(e){l[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}}));var f=w("ERR_FR_REDIRECTION_FAILURE",""),p=w("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),h=w("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),d=w("ERR_STREAM_WRITE_AFTER_END","write after end");function v(e,t){a.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){r._processResponse(e)},this._performRequest()}function y(e,t){clearTimeout(e._timeout),e._timeout=setTimeout((function(){e.emit("timeout")}),t)}function g(){clearTimeout(this._timeout)}function m(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(i){var s=i+":",a=r[s]=e[i],l=t[i]=Object.create(a);l.request=function(e,i,a){if("string"==typeof e){var l=e;try{e=_(new o(l))}catch(t){e=n.parse(l)}}else o&&e instanceof o?e=_(e):(a=i,i=e,e={protocol:s});return"function"==typeof i&&(a=i,i=null),(i=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,i)).nativeProtocols=r,u.equal(i.protocol,s,"protocol mismatch"),c("options",i),new v(i,a)},l.get=function(e,t,r){var n=l.request(e,t,r);return n.end(),n}})),t}function b(){}function _(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function x(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return r}function w(e,t){function r(e){Error.captureStackTrace(this,this.constructor),this.message=e||t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}v.prototype=Object.create(a.prototype),v.prototype.write=function(e,t,r){if(this._ending)throw new d;if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new h),this.abort()):r&&r()},v.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var n=this,o=this._currentRequest;this.write(e,t,(function(){n._ended=!0,o.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},v.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},v.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},v.prototype.setTimeout=function(e,t){if(t&&this.once("timeout",t),this.socket)y(this,e);else{var r=this;this._currentRequest.once("socket",(function(){y(r,e)}))}return this.once("response",g),this.once("error",g),this},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){v.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(v.prototype,e,{get:function(){return this._currentRequest[e]}})})),v.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},v.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var o=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var i in this._currentUrl=n.format(this._options),o._redirectable=this,l)i&&o.on(i,l[i]);if(this._isRedirect){var s=0,a=this,u=this._requestBodyBuffers;!function e(t){if(o===a._currentRequest)if(t)a.emit("error",t);else if(s<u.length){var r=u[s++];o.finished||o.write(r.data,r.encoding,e)}else a._ended&&o.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},v.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(r&&!1!==this._options.followRedirects&&t>=300&&t<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",b),this._currentRequest.abort(),e.destroy(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new p);((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],x(/^content-/i,this._options.headers));var o=x(/^host$/i,this._options.headers)||n.parse(this._currentUrl).hostname,i=n.resolve(this._currentUrl,r);c("redirecting to",i),this._isRedirect=!0;var s=n.parse(i);if(Object.assign(this._options,s),s.hostname!==o&&x(/^authorization$/i,this._options.headers),"function"==typeof this._options.beforeRedirect){var a={headers:e.headers};try{this._options.beforeRedirect.call(null,this._options,a)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){var u=new f("Redirected request failed: "+e.message);u.cause=e,this.emit("error",u)}}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]},e.exports=m({http:i,https:s}),e.exports.wrap=m},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("assert")},function(e,t,r){var n;try{n=r(243)("follow-redirects")}catch(e){n=function(){}}e.exports=n},function(e,t,r){"undefined"!=typeof process&&"renderer"===process.type?e.exports=r(244):e.exports=r(246)},function(e,t,r){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=r(84)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())},function(e,t){var r=1e3,n=6e4,o=60*n,i=24*o;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var a,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(a=e,i,"day")||s(a,o,"hour")||s(a,n,"minute")||s(a,r,"second")||a+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){var n=r(247),o=r(34);(t=e.exports=r(84)).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return s.write(o.format.apply(o,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var n=this.color,o="  [3"+n+";1m"+r+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push("[3"+n+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(i)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{});var i=parseInt(process.env.DEBUG_FD,10)||2;1!==i&&2!==i&&o.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var s=1===i?process.stdout:2===i?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new n.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var o=r(32);(t=new o.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var i=r(248);(t=new i.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(i);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)},t.enable(a())},function(e,t){e.exports=require("tty")},function(e,t){e.exports=require("net")},function(e,t,r){var n=r(17),o=r(16),i=r(50);
/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, socket, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */e.exports={checkMethodAndHeader:function(e,t){return"GET"===e.method&&e.headers.upgrade?"websocket"!==e.headers.upgrade.toLowerCase()?(t.destroy(),!0):void 0:(t.destroy(),!0)},XHeaders:function(e,t,r){if(r.xfwd){var n={for:e.connection.remoteAddress||e.socket.remoteAddress,port:i.getPort(e),proto:i.hasEncryptedConnection(e)?"wss":"ws"};["for","port","proto"].forEach((function(t){e.headers["x-forwarded-"+t]=(e.headers["x-forwarded-"+t]||"")+(e.headers["x-forwarded-"+t]?",":"")+n[t]}))}},stream:function(e,t,r,s,a,u){var c=function(e,t){return Object.keys(t).reduce((function(e,r){var n=t[r];if(!Array.isArray(n))return e.push(r+": "+n),e;for(var o=0;o<n.length;o++)e.push(r+": "+n[o]);return e}),[e]).join("\r\n")+"\r\n\r\n"};i.setupSocket(t),s&&s.length&&t.unshift(s);var l=(i.isSSL.test(r.target.protocol)?o:n).request(i.setupOutgoing(r.ssl||{},r,e));return a&&a.emit("proxyReqWs",l,e,t,r,s),l.on("error",f),l.on("response",(function(e){e.upgrade||(t.write(c("HTTP/"+e.httpVersion+" "+e.statusCode+" "+e.statusMessage,e.headers)),e.pipe(t))})),l.on("upgrade",(function(e,r,n){r.on("error",f),r.on("end",(function(){a.emit("close",e,r,n)})),t.on("error",(function(){r.end()})),i.setupSocket(r),n&&n.length&&r.unshift(n),t.write(c("HTTP/1.1 101 Switching Protocols",e.headers)),r.pipe(t).pipe(r),a.emit("open",r),a.emit("proxySocket",r)})),l.end();function f(r){u?u(r,e,t):a.emit("error",r,e,t),t.end()}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(251);t.default=function(e){var t;"gzip"===(null===(t=e.getHeader("content-encoding"))||void 0===t?void 0:t.toLowerCase())&&e.body instanceof Buffer&&(e.removeHeader("content-encoding"),e.body=n.gunzipSync(e.body))}},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";const n=r(253),o=Symbol("max"),i=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),l=Symbol("noDisposeOnSet"),f=Symbol("lruList"),p=Symbol("cache"),h=Symbol("updateAgeOnGet"),d=()=>1;const v=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(y(e,t)){if(m(e,n),!e[a])return}else r&&(e[h]&&(n.value.now=Date.now()),e[f].unshiftNode(n));return t.value}},y=(e,t)=>{if(!t||!t.maxAge&&!e[u])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[u]&&r>e[u]},g=e=>{if(e[i]>e[o])for(let t=e[f].tail;e[i]>e[o]&&null!==t;){const r=t.prev;m(e,t),t=r}},m=(e,t)=>{if(t){const r=t.value;e[c]&&e[c](r.key,r.value),e[i]-=r.length,e[p].delete(r.key),e[f].removeNode(t)}};class b{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const _=(e,t,r,n)=>{let o=r.value;y(e,o)&&(m(e,r),e[a]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||d;if(this[s]="function"!=typeof t?d:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[c]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,g(this)}get max(){return this[o]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,g(this)}get maxAge(){return this[u]}set lengthCalculator(e){"function"!=typeof e&&(e=d),e!==this[s]&&(this[s]=e,this[i]=0,this[f].forEach(e=>{e.length=this[s](e.value,e.key),this[i]+=e.length})),g(this)}get lengthCalculator(){return this[s]}get length(){return this[i]}get itemCount(){return this[f].length}rforEach(e,t){t=t||this;for(let r=this[f].tail;null!==r;){const n=r.prev;_(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[f].head;null!==r;){const n=r.next;_(this,e,r,t),r=n}}keys(){return this[f].toArray().map(e=>e.key)}values(){return this[f].toArray().map(e=>e.value)}reset(){this[c]&&this[f]&&this[f].length&&this[f].forEach(e=>this[c](e.key,e.value)),this[p]=new Map,this[f]=new n,this[i]=0}dump(){return this[f].map(e=>!y(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[f]}set(e,t,r){if((r=r||this[u])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[s](t,e);if(this[p].has(e)){if(a>this[o])return m(this,this[p].get(e)),!1;const s=this[p].get(e).value;return this[c]&&(this[l]||this[c](e,s.value)),s.now=n,s.maxAge=r,s.value=t,this[i]+=a-s.length,s.length=a,this.get(e),g(this),!0}const h=new b(e,t,a,n,r);return h.length>this[o]?(this[c]&&this[c](e,t),!1):(this[i]+=h.length,this[f].unshift(h),this[p].set(e,this[f].head),g(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!y(this,t)}get(e){return v(this,e,!0)}peek(e){return v(this,e,!1)}pop(){const e=this[f].tail;return e?(m(this,e),e.value):null}del(e){m(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const e=o-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach((e,t)=>v(this,t,!1))}}},function(e,t,r){"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function i(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var s=[];for(n=0;i&&n<t;n++)s.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(n=0;n<r.length;n++)i=o(this,i,r[n]);return s},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(254)(n)}catch(e){}},function(e,t,r){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(9)),s=function(){function e(e,t){var r,o,i;this.cookies={};var s=e.headers.host;if(this.body=e.body,this.method=null===(i=e.method)||void 0===i?void 0:i.toLowerCase(),this.query=this.excludeXDNQueryParams(e.query||{}),this.pathname=new URL(e.url,"http://"+s).pathname,this.headers={"accept-encoding":e.headers["accept-encoding"],host:s},t)try{for(var a=n(t.getActions()),u=a.next();!u.done;u=a.next()){(0,u.value)(this,e)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}}return e.create=function(t,r){return new e(t,r)},e.prototype.excludeXDNQueryParams=function(e){var t={};for(var r in e)r.startsWith("xdn_")||(t[r]=e[r]);return t},e.prototype.toSortedArray=function(e){return Object.keys(e).sort().map((function(t){return[t,e[t]]}))},e.prototype.toString=function(){return JSON.stringify({pathname:this.pathname,method:this.method,query:this.toSortedArray(this.query),body:a(this.body),headers:this.toSortedArray(this.headers),cookies:this.toSortedArray(this.cookies)})},e}();function a(e){if(!e)return null;var t=i.default.createHash("sha256");return t.update(e),t.digest("hex")}t.default=s},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(81)),i=o.default.hex("D355A7"),s=o.default.hex("9C57CF"),a=o.default.hex("6D59EF");t.xdn=""+a("X")+s("D")+i("N"),t.infoLogLabel="["+t.xdn+" INFO]:",t.warnLogLabel="["+t.xdn+" "+o.default.yellowBright("WARN")+"]:",t.errorLogLabel="["+t.xdn+" "+o.default.redBright("ERROR")+"]:",t.default=o.default.bold("MOOVWEB "+o.default.italic(t.xdn))},function(e){e.exports=JSON.parse('{"name":"@xdn/core","version":"2.25.0","main":"./index.js","license":"UNLICENSED","scripts":{"docs":"typedoc","build":"rm -rf ./dist; mkdir ./dist; cp -r package.json README.md serverless.yml default-app ./dist; tsc; webpack;","watch":"npm-watch","ts:watch":"tsc --watch","push-build":"npm run build && cd dist && yalc push && cd ..","release":"cd ./dist; npm publish --access public","release:next":"npm run release -- --tag next","test":"jest --watchAll=false"},"dependencies":{"ajv":"^6.12.3","babel-loader":"^8.1.0","chalk":"^2.4.2","content-type":"^1.0.4","cookie":"^0.4.1","cross-spawn":"^7.0.3","decode-uri-component":"^0.2.0","express":"^4.17.1","fs-extra":"^8.1.0","globby":"^11.0.1","http-proxy":"^1.18.1","lodash":"^4.17.19","lru-cache":"^6.0.0","mime-types":"^2.1.27","node-fetch":"^2.6.1","path-to-regexp":"^6.1.0","pino":"^6.5.1","resolve-package-path":"^2.0.0","slash":"^3.0.0","tcp-port-used":"^1.0.1","ts-loader":"^6.2.2","uuid":"^8.3.0","webpack":"^4.44.1","webpack-bundle-analyzer":"^3.9.0","webpack-dev-middleware":"^3.7.2"},"publishConfig":{"directory":"dist"},"watch":{"push-build":{"patterns":["src","bin","serverless.yml","default-app","package.json"],"extensions":["js","ts"],"quiet":false}},"jest":{"clearMocks":true,"collectCoverage":true,"transform":{"^.+\\\\.(js)?$":"babel-jest","^.+\\\\.ts$":"ts-jest"},"moduleFileExtensions":["ts","js","json"],"setupFiles":["<rootDir>/test/jest.js"],"transformIgnorePatterns":["<rootDir>/node_modules/"],"moduleNameMapper":{"../package.json":"<rootDir>/package.json","^@xdn/core(.*)$":"<rootDir>/src/$1"},"collectCoverageFrom":["./src/**/*.{ts,js}","!**/mocks/**","!**/index.ts","!**/plugins/PluginBase.ts","!**/bin/**/*"]},"devDependencies":{"@types/content-type":"^1.1.3","@types/cookie":"^0.3.3","@types/cross-spawn":"^6.0.2","@types/decode-uri-component":"^0.2.0","@types/express":"^4.17.7","@types/fs-extra":"^8.1.1","@types/http-proxy":"^1.17.4","@types/lru-cache":"^5.1.0","@types/mime-types":"^2.1.0","@types/route-parser":"^0.1.3","@types/tcp-port-used":"^1.0.0","@types/uuid":"^8.0.1","@types/webpack":"^4.41.21","@types/webpack-bundle-analyzer":"^3.8.0","@types/webpack-dev-middleware":"^3.7.1"}}')},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise((function(t){e.body="",e.on("data",(function(t){return e.body+=t.toString()})),e.on("end",t)}))}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(r(70)),c=r(87),l=r(33),f=r(8),p=a(r(14)),h=a(r(73)),d=r(0);t.staticAssetManifest={},t.STATIC_ASSET_MANIFEST_FILE="static-asset-manifest.json";var v=function(){function e(e){if(this._routes=[],!e)throw new Error("Route group name is required!");this.name=e}return e.prototype.match=function(e,t){var r=new u.default(e,t);return this._routes.push(r),this},e.prototype.dir=function(e,r){var n,a,u=this,c=f.join(process.cwd(),e),h=t.staticAssetManifest[e]=[],d=l.isCloud()?this.staticAssetsForPath(e):p.default("glob").sync(r.glob||"**/*",{cwd:c,nodir:!0,ignore:r.ignore});r.sort&&(d=r.sort(d));var v=function(e){var t,n,a=r.paths&&r.paths(e)||["/"+e];l.isCloud()||h.push(e);try{for(var c=(t=void 0,s(a)),f=c.next();!f.done;f=c.next()){var p=f.value;y.match(p,(function(t){return o(u,void 0,void 0,(function(){return i(this,(function(n){return r.handler&&r.handler(e)(t),[2]}))}))}))}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}},y=this;try{for(var g=s(d),m=g.next();!m.done;m=g.next()){v(m.value)}}catch(e){n={error:e}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(n)throw n.error}}return this},e.prototype.static=function(e,t){return this.dir(e,n(n({},t),{handler:function(r){return function(n){t.handler&&t.handler(r)(n),n.serveStatic(e+"/"+r)}}}))},e.prototype.requireBasicAuth=function(e){var t,r,o,i=e.route,s=e.username,a=e.password,u=e.realm,c=void 0===u?"Access to the site":u;if(s&&a){var l=Buffer.from(s+":"+a).toString("base64");i=h.default(i),this.match(n(n({},i),{headers:n(n({},i.headers),(t={},t[d.HTTP_HEADERS.authorization]=null,t[d.HTTP_HEADERS.xXdnMatchedRoutes]=null,t))}),(function(e){var t=e.send;(0,e.setResponseHeader)("WWW-Authenticate",'Basic realm="'+c+'"'),t("",401,"Unauthorized")})).match(n(n({},i),{headers:n(n({},i.headers),(r={},r[d.HTTP_HEADERS.authorization]=new RegExp("^((?!Basic "+l+").)*$"),r[d.HTTP_HEADERS.xXdnMatchedRoutes]=null,r))}),(function(e){(0,e.send)("",403,"Forbidden")})).match(n(n({},i),{headers:n(n({},i.headers),(o={},o[d.HTTP_HEADERS.xXdnMatchedRoutes]=null,o))}),(function(e){(0,e.removeRequestHeader)("authorization")}))}return this},e.prototype.staticAssetsForPath=function(e){return p.default(f.join(process.cwd(),t.STATIC_ASSET_MANIFEST_FILE))[e]},e.prototype.clear=function(){return this._routes=[],l.isCloud()||c.clearCache(),this},Object.defineProperty(e.prototype,"routes",{get:function(){return this._routes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._routes.length},enumerable:!0,configurable:!0}),e}();t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.routeGroups=[]}return e.prototype.add=function(e){return this.routeGroups.push(e),this},e.prototype.getGroups=function(){return this.routeGroups},e.prototype.findByName=function(e){return this.routeGroups.find((function(t){return t.name===e}))},e.prototype.getRoutes=function(){var e=[];return this.getGroups().forEach((function(t){e=e.concat(t.routes)})),e},e.prototype.clearFallbacks=function(){return this.routeGroups=this.routeGroups.filter((function(e){return"fallback"!==e.name})),this},Object.defineProperty(e.prototype,"length",{get:function(){return this.routeGroups.length},enumerable:!0,configurable:!0}),e}();t.default=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(r(13)),c=a(r(262)),l=function(){function e(){this.options=[]}return e.prototype.push=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.options).push.apply(e,s(t))},e.resolveDestinationPreloadConfig=function(e){return n(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return t=[],[4,(r=new c.default).add.apply(r,s(e.preloadRequests.options)).onTaskDone((function(e){t.push.apply(t,s(e))})).resolve()];case 1:return n.sent(),[2,{requests:t}]}}))}))},e.resolvePreloadConfig=function(t){return n(this,void 0,void 0,(function(){var r,n,i;return o(this,(function(o){switch(o.label){case 0:if(r=[],n=new c.default,Object.keys(t.getDestinations()).length)for(i in t.getDestinations())n.add(e.resolveDestinationPreloadConfig(t.getDestinations()[i]));else n.add(e.resolveDestinationPreloadConfig(t));return[4,n.onTaskDone((function(e){var t=e.requests;r.push.apply(r,s(t))})).resolve()];case 1:return o.sent(),[2,{requests:r,concurrency:u.default.get("prerenderConcurrency",null)}]}}))}))},e}();t.default=l},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._tasks=[],this._resolveHandler=Function.prototype,this._errorHandler=function(e){throw e}}return e.prototype.add=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this._tasks).push.apply(e,o(t)),this},e.prototype.onTaskDone=function(e){return this._resolveHandler=e,this},e.prototype.onTaskError=function(e){return this._errorHandler=e,this},e.prototype.resolve=function(){var e=this,t=this._convertTasksToPromises().map((function(t,r){return t.then((function(t){return e._resolveHandler(t),t})).catch((function(t){return e._errorHandler(t)}))}));return Promise.all(t)},e.prototype._convertTasksToPromises=function(){return this._tasks.map((function(e){if("function"!=typeof e)return Promise.resolve(e);try{var t=e();return t instanceof Promise?t:Promise.resolve(t)}catch(e){return Promise.reject(e)}}))},e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(264)),i=function(){function e(){this.groups=[],this.name=null}return e.prototype.group=function(e){var t=new o.default(e);return this.groups.push(t),t},e.prototype.toJSON=function(){return this.groups.map((function(e){return e.toJSON()}))},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.name=e}return e.prototype.byPattern=function(e){this.pattern=e},e.prototype.toJSON=function(){if(!this.pattern)throw new Error("byPattern is required for group "+this.name);return{groupedValue:this.name,matchRegex:this.pattern.source}},e}();t.default=n},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(90));t.default=function(){return new o.default}},,function(e,t,r){"use strict";r.r(t),r.d(t,"v1",(function(){return y})),r.d(t,"v3",(function(){return b})),r.d(t,"v4",(function(){return _})),r.d(t,"v5",(function(){return x})),r.d(t,"NIL",(function(){return w})),r.d(t,"version",(function(){return E})),r.d(t,"validate",(function(){return c})),r.d(t,"stringify",(function(){return f})),r.d(t,"parse",(function(){return g}));var n=r(9),o=r.n(n);const i=new Uint8Array(256);let s=i.length;function a(){return s>i.length-16&&(o.a.randomFillSync(i),s=0),i.slice(s,s+=16)}var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;var c=function(e){return"string"==typeof e&&u.test(e)};const l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).substr(1));var f=function(e,t=0){const r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!c(r))throw TypeError("Stringified UUID is invalid");return r};let p,h,d=0,v=0;var y=function(e,t,r){let n=t&&r||0;const o=t||new Array(16);let i=(e=e||{}).node||p,s=void 0!==e.clockseq?e.clockseq:h;if(null==i||null==s){const t=e.random||(e.rng||a)();null==i&&(i=p=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=h=16383&(t[6]<<8|t[7]))}let u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:v+1;const l=u-d+(c-v)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||u>d)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=u,v=c,h=s,u+=122192928e5;const y=(1e4*(268435455&u)+c)%4294967296;o[n++]=y>>>24&255,o[n++]=y>>>16&255,o[n++]=y>>>8&255,o[n++]=255&y;const g=u/4294967296*1e4&268435455;o[n++]=g>>>8&255,o[n++]=255&g,o[n++]=g>>>24&15|16,o[n++]=g>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(let e=0;e<6;++e)o[n+e]=i[e];return t||f(o)};var g=function(e){if(!c(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};var m=function(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=g(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=r(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=s[e];return o}return f(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};var b=m("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o.a.createHash("md5").update(e).digest()}));var _=function(e,t,r){const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return f(n)};var x=m("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o.a.createHash("sha1").update(e).digest()})),w="00000000-0000-0000-0000-000000000000";var E=function(e){if(!c(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}}])}));